webpackJsonp([22],{Gu5F:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Iq4+"),s=a.n(n),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:""!==this.scan,expression:"scan !== ''"}],staticClass:"WeChatPay"},[e("div",{staticClass:"bg_1"},[this._m(0),this._v(" "),e("div",{staticClass:"qrcode"},[e("div",{staticClass:"img"},[e("img",{staticClass:"scan",attrs:{src:"data:image/jpeg;base64,"+this.scan}}),this._v(" "),e("img",{staticClass:"icon",attrs:{src:"/static/￥.png"}})]),this._v(" "),e("p",{staticClass:"tip"},[this._v("扫码付款")])])]),this._v(" "),e("div",{staticClass:"bg_2 bg_img_none"},[e("mt-cell",[e("span",{attrs:{slot:"title"},slot:"title"},[this._v("订单编号")]),this._v(" "),e("span",{staticClass:"color_2"},[this._v(this._s(this.orderCode))])]),this._v(" "),e("mt-cell",[e("span",{attrs:{slot:"title"},slot:"title"},[this._v("金额")]),this._v(" "),e("span",{staticClass:"color"},[this._v("￥"+this._s(this.payAmount))])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"t-r clear"},[e("img",{staticClass:"f-l",attrs:{src:"/static/wechat.png"}}),this._v(" "),e("span",{staticClass:"wechat-pay"},[this._v("微信支付")])])}]},i=function(t){a("JN3O")},u=a("VU/8")(s.a,r,!1,i,"data-v-52773792",null);e.default=u.exports},"Iq4+":function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(a("Xxa5")),r=n(a("exGp")),i=n(a("3D1+")),u=a("JaHG");e.default={name:"WeChatPay",data:function(){return{pushName:this.$route.meta.pushName,pay:!1,orderId:null,paymentId:null,orderCode:"",payAmount:"",scan:"",timeInterval:null}},created:function(){var t=(0,r.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.orderId=this.$route.query.orderId,t.next=3,this.getData();case 3:return t.next=5,this.getScan();case 5:this.interval();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeRouteLeave:function(t,e,a){clearInterval(this.timeInterval),a()},methods:{interval:function(){var t=this,e=this;this.timeInterval=setInterval((0,r.default)(s.default.mark(function a(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.loadData)(function(){return i.default.payment(e.paymentId)},function(t){var a=t.paymentStatus;e.pay=20===a},u.defaultPreHandler,!0);case 2:case"end":return t.stop()}},a,t)})),3e3)},getData:function(){var t=(0,r.default)(s.default.mark(function t(){var e=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.loadData)(function(){return i.default.getOrderDetail(e.orderId)},function(t){e.payAmount=t.paymentDto.payAmount,e.orderCode=t.orderCode,e.paymentId=t.paymentDto.id},u.defaultPreHandler);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getScan:function(){var t=(0,r.default)(s.default.mark(function t(){var e=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.loadData)(function(){return i.default.scan(e.paymentId)},function(t){e.scan=t},u.defaultPreHandler,!0);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},watch:{pay:function(){var t=(0,r.default)(s.default.mark(function t(e){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:!0===e&&(window.history.pushState({},"title","#/login"),window.history.pushState({},"title","#/MyOrder"),this.$router.push({name:this.pushName,query:{orderId:this.orderId}}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}},JN3O:function(t,e){}});
//# sourceMappingURL=22.ba4c089bd3d2b90761c9.js.map