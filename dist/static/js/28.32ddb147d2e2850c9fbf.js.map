{"version":3,"sources":["webpack:///src/components/sell/order/my_order.vue","webpack:///./src/components/sell/order/my_order.vue?861e","webpack:///./src/components/sell/order/my_order.vue"],"names":["__webpack_require__","_utils","created","_ref","_asyncToGenerator3","default","_regenerator2","mark","_callee","getList","methods","_extends3","mapMutations","page","orderList","payType","orderId","data","LoadMore","noMore","paymentId","removeOrderFilling","status","payMethod","order_my_order","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","length","_v","attrs","infinite-scroll-disabled","infinite-scroll-distance","_l","item","on","click","$event","goToPageOrderDetail","title","orderItemDtos","serviceOptionItem","class","color","_s","orderCode","customerDeviceDto","brandName","productCategoriesName","customerDto","customerName","paymentDto","payAmount","submitTime","awardStatus","award","_e","type","size","stopPropagation","goToPageOrderFilling","goToPageDraw","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","my_order_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/28.32ddb147d2e2850c9fbf.js","sourcesContent":["<template>\n  <div class=\"MyOrder\" v-show=\"showList\">\n    <div v-if=\"orderList.length === 0\" class=\"null_data\">\n      <div class=\"null\"></div>\n      <p>暂无历史订单</p>\n    </div>\n    <div v-else>\n      <div v-infinite-scroll=\"LoadMore\"\n           infinite-scroll-disabled=\"loading\"\n           infinite-scroll-distance=\"300\">\n        <div class=\"bg_img_none\" v-for=\"item in orderList\" @click=\"goToPageOrderDetail(item.orderId)\">\n          <mt-cell :title=\"'产品：' + item.orderItemDtos[0].serviceOptionItem.name\">\n            <span :class=\"color(item.status)\">{{ item.status }}</span>\n          </mt-cell>\n          <div class=\"content\">\n            <mt-cell title=\"订单编号\" :value=\"item.orderCode\"></mt-cell>\n            <mt-cell title=\"品牌品类\">\n              <span>{{item.orderItemDtos[0].customerDeviceDto.brandName || ''}}</span>\n              <span class=\"m-l5\">{{item.orderItemDtos[0].customerDeviceDto.productCategoriesName || ''}}</span>\n            </mt-cell>\n            <mt-cell title=\"客户姓名\" :value=\"item.customerDto.customerName\"></mt-cell>\n            <mt-cell title=\"订单金额\" :value=\"'￥' + item.paymentDto.payAmount\"></mt-cell>\n            <mt-cell title=\"下单时间\" :value=\"item.submitTime\"></mt-cell>\n            <div v-if=\"item.status === '已完成' && item.awardStatus && item.awardStatus !== 1\">\n              <mt-cell title=\"抽奖结果\">\n                <span v-if=\"item.awardStatus === 3\">{{item.award}}</span>\n                <span v-if=\"item.awardStatus === 2\">未中奖</span>\n              </mt-cell>\n            </div>\n          </div>\n          <div v-if=\"item.status === '未支付'\">\n            <mt-button type=\"primary\" size=\"large\"\n                       @click.stop=\"goToPageOrderFilling(item.orderId)\">去提交\n            </mt-button>\n          </div>\n          <div v-if=\"item.status === '已支付,待录入'\">\n            <mt-button type=\"primary\" size=\"large\" @click.stop=\"goToPageOrderFilling(item.orderId)\">去录单,领佣金</mt-button>\n          </div>\n          <div v-if=\"item.status === '已完成'\">\n            <mt-button v-if=\"item.awardStatus === 1\" type=\"danger\" size=\"large\"\n                       @click.stop=\"goToPageDraw(item.orderId)\">去抽奖\n            </mt-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"load noMore\" v-show=\"noMore\">已无更多</div>\n      <div class=\"load\" v-show=\"loading\">\n        <mt-spinner color=\"#d4d4d4\" type=\"fading-circle\"></mt-spinner>\n        正在加载\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import api from '../../../api/index2'\n  import {loadData, defaultPreHandler} from '../../../common/utils'\n  import moment from 'moment'\n  import {createNamespacedHelpers} from 'vuex'\n\n  const {mapMutations} = createNamespacedHelpers('order')\n\n  export default {\n    name: 'MyOrder',\n    data () {\n      return {\n        orderList: [],\n        page: 1,\n        noMore: true,\n        loading: false,\n        showList: false\n      }\n    },\n    async created () {\n      await this.getList()\n      this.showList = true\n    },\n    methods: {\n      ...mapMutations(['removeOrderFilling']),\n      async getList () {\n        await loadData(() => {\n          return api.getOrders(this.page)\n        }, async (orderList) => {\n          await this.setDraw(orderList)\n        }, defaultPreHandler)\n      },\n      async setDraw (orderList) {\n        for (let item of orderList) {\n          item.submitTime = moment(item.submitTime).format('YYYY-MM-DD HH:mm:ss')\n          item.status = this.orderStatusStr(item.orderStatus, item.paymentDto.paymentStatus, item.paymentDto.payType)\n          if (item.awardStatus === 3) {\n            await loadData(() => {\n              return api.getIsDraw(item.orderId)\n            }, data => {\n              let award = data\n              this.$set(item, 'award', award.awardName.slice(0, 16))\n            }, defaultPreHandler, true)\n          }\n        }\n        this.orderList.push(...orderList)\n        this.noMore = this.orderList.length < (5 * this.page)\n      },\n      async LoadMore () {\n        if (this.noMore) return\n        this.loading = true\n        this.page += 1\n        await loadData(() => {\n          return api.getOrders(this.page)\n        }, async (data) => {\n          let orderList = data\n          await loadData(() => {\n            this.setDraw(orderList)\n          }, null, null, true)\n        }, defaultPreHandler, true)\n        this.loading = false\n      },\n      goToPageOrderDetail (orderId) {\n        this.$router.push({\n          name: 'OrderDetail',\n          query: {\n            orderId\n          }\n        })\n      },\n      goToPagePayList (orderId, paymentId) {\n        this.$router.push({\n          name: 'PayList',\n          query: {\n            orderId,\n            paymentId\n          }\n        })\n      },\n      goToPageOrderFilling (orderId) {\n        this.removeOrderFilling()\n        this.$router.push({\n          name: 'OrderFilling',\n          query: {\n            orderId\n          }\n        })\n      },\n      goToPageDraw (orderId) {\n        this.$router.push({\n          name: 'Draw',\n          query: {\n            orderId\n          }\n        })\n      },\n      color (status) {\n        switch (status) {\n          case '未支付':\n            return 'color_1'\n          case '已支付,待录入':\n            return 'color_2'\n          case '已完成':\n            return 'color_0'\n          default:\n            return 'color_3'\n        }\n      },\n      orderStatusStr (orderCode, payCode, payMethod) {\n        if (payCode === 30 || orderCode === 100) {\n          return '已退款'\n        } else if (payCode === 50 || orderCode === 40) {\n          return '已取消'\n        } else {\n          let arr = [orderCode, payCode, payMethod]\n          let status = arr.join('')\n          switch (status) {\n            case '110200':\n              return '已完成'\n            case '60200':\n              return '已完成'\n            case '110201':\n              return '已完成'\n            case '60201':\n              return '已完成'\n            case '60202':\n              return '已完成'\n            case '110202':\n              return '已完成'\n            case '20100':\n              return '已支付,待录入'\n            case '20202':\n              return '已支付,待录入'\n            case '20201':\n              return '已支付,待录入'\n            case '21100':\n              return '未支付'\n            // case '20102':\n            //   return '未支付'\n            // case '20101':\n            //   return '未支付'\n            // case '2010':\n            //   return '未支付'\n            default:\n              return ''\n          }\n        }\n      }\n    }\n  }\n</script>\n<style scoped>\n  .m-l5 {\n    margin-left: 5px;\n  }\n\n  .bg_img_none {\n    background: #fff;\n    padding-bottom: 5px;\n  }\n\n  .bg_img_none:not(:last-child) {\n    margin-bottom: 10px;\n  }\n\n  .content:before {\n    content: \" \";\n    display: block;\n    width: calc(100% - 15px);\n    margin-left: 15px;\n    height: 1px;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n    background: #e5e5e5;\n  }\n\n  .color_0 {\n    color: #26a2ff;\n  }\n\n  .color_1 {\n    color: #ef4f4f;\n  }\n\n  .color_2 {\n    color: #ffc107;\n  }\n\n  .color_3 {\n    color: #888;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/sell/order/my_order.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showList),expression:\"showList\"}],staticClass:\"MyOrder\"},[(_vm.orderList.length === 0)?_c('div',{staticClass:\"null_data\"},[_c('div',{staticClass:\"null\"}),_vm._v(\" \"),_c('p',[_vm._v(\"暂无历史订单\")])]):_c('div',[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.LoadMore),expression:\"LoadMore\"}],attrs:{\"infinite-scroll-disabled\":\"loading\",\"infinite-scroll-distance\":\"300\"}},_vm._l((_vm.orderList),function(item){return _c('div',{staticClass:\"bg_img_none\",on:{\"click\":function($event){_vm.goToPageOrderDetail(item.orderId)}}},[_c('mt-cell',{attrs:{\"title\":'产品：' + item.orderItemDtos[0].serviceOptionItem.name}},[_c('span',{class:_vm.color(item.status)},[_vm._v(_vm._s(item.status))])]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('mt-cell',{attrs:{\"title\":\"订单编号\",\"value\":item.orderCode}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"品牌品类\"}},[_c('span',[_vm._v(_vm._s(item.orderItemDtos[0].customerDeviceDto.brandName || ''))]),_vm._v(\" \"),_c('span',{staticClass:\"m-l5\"},[_vm._v(_vm._s(item.orderItemDtos[0].customerDeviceDto.productCategoriesName || ''))])]),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"客户姓名\",\"value\":item.customerDto.customerName}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"订单金额\",\"value\":'￥' + item.paymentDto.payAmount}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"下单时间\",\"value\":item.submitTime}}),_vm._v(\" \"),(item.status === '已完成' && item.awardStatus && item.awardStatus !== 1)?_c('div',[_c('mt-cell',{attrs:{\"title\":\"抽奖结果\"}},[(item.awardStatus === 3)?_c('span',[_vm._v(_vm._s(item.award))]):_vm._e(),_vm._v(\" \"),(item.awardStatus === 2)?_c('span',[_vm._v(\"未中奖\")]):_vm._e()])],1):_vm._e()],1),_vm._v(\" \"),(item.status === '未支付')?_c('div',[_c('mt-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();_vm.goToPageOrderFilling(item.orderId)}}},[_vm._v(\"去提交\\n          \")])],1):_vm._e(),_vm._v(\" \"),(item.status === '已支付,待录入')?_c('div',[_c('mt-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();_vm.goToPageOrderFilling(item.orderId)}}},[_vm._v(\"去录单,领佣金\")])],1):_vm._e(),_vm._v(\" \"),(item.status === '已完成')?_c('div',[(item.awardStatus === 1)?_c('mt-button',{attrs:{\"type\":\"danger\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();_vm.goToPageDraw(item.orderId)}}},[_vm._v(\"去抽奖\\n          \")]):_vm._e()],1):_vm._e()],1)})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noMore),expression:\"noMore\"}],staticClass:\"load noMore\"},[_vm._v(\"已无更多\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"load\"},[_c('mt-spinner',{attrs:{\"color\":\"#d4d4d4\",\"type\":\"fading-circle\"}}),_vm._v(\"\\n      正在加载\\n    \")],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d687b18e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sell/order/my_order.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d687b18e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./my_order.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./my_order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d687b18e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./my_order.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d687b18e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sell/order/my_order.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}