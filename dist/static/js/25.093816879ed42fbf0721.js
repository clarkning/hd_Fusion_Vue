webpackJsonp([25],{q8zd:function(e,t){},qVYH:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r("woOf")),i=a(r("Dd8w")),s=a(r("mvHQ")),o=a(r("BO1k")),c=a(r("Xxa5")),d=a(r("exGp")),l=r("Au9i"),u=r("NYxO"),p=a(r("31Wn")),f=a(r("3D1+")),h=a(r("PJh5")),m=r("JaHG"),v=a(r("fxnj")),g=a(r("M4fF")),y=(0,u.createNamespacedHelpers)("order"),x=y.mapState,k=y.mapMutations,b=y.mapActions;t.default={name:"OrderFilling",components:{sellProgress:p.default},data:function(){return{pushName:"",confirmationInformation:!1,ifSubmit:!0,orderId:null,timePicker:{pickerValue:(0,h.default)().toDate(),maxDate:(0,h.default)().toDate()},orderFilling:{customerDto:{customerName:"",phoneNumber:""},category:{value:{categoryName:"请选择品类",categoryId:null},categoryList:[],isJumpingCategory:null},brand:{value:{brandName:"请选择品牌",brandId:null},brandList:[],isJumpingBrand:null},expand:[],service:{serviceItemName:null,unitPrice:null,serviceOptionItemId:null,servicePackId:null},viewDate:null,purchaseTime:null,purchasePrice:""},orderDetail:{},expand:{submitImage:!1,showLocation:!1,confirm:!1,imageExpand:[],timeExpand:[],otherExpand:[],expands:[]},provincePicker:{value:"",slot:[{flex:1,values:[],className:"province",textAlign:"center"}],show:!1},cityPicker:{value:"",slot:[{flex:1,values:[],className:"city",textAlign:"center"}],show:!1},countyPicker:{value:"",slot:[{flex:1,values:[],className:"county",textAlign:"center"}],show:!1},address:{desc:"",province:{geographyType:0,id:null,name:""},city:{geographyType:1,id:null,name:""},county:{geographyType:2,id:null,name:""}},data:{orderId:"",brandId:"",categoryId:"",customerName:"",customerPhone:"",expandData:[],purchasePrice:"",remark:"",serviceOptionItemId:""},orderStatus:"noSubmit"}},created:function(){var e=(0,d.default)(c.default.mark(function e(){var t=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.loadData)(function(){return t.load()});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeRouteLeave:function(e,t,r){this.setCustomerDto(this.orderFilling.customerDto),this.setBrandValue(this.orderFilling.brand),this.setCategoryValue(this.orderFilling.category);var a=!0,n=!1,i=void 0;try{for(var c,d=(0,o.default)(this.expand.expands);!(a=(c=d.next()).done);a=!0){var l=c.value;5===l.contentTypeCode&&(l.value=(0,s.default)({addressDescription:this.address.desc,city:this.address.city.name,cityId:this.address.city.id,county:this.address.county.name,countyId:this.address.county.id,province:this.address.province.name,provinceId:this.address.province.id}))}}catch(e){n=!0,i=e}finally{try{!a&&d.return&&d.return()}finally{if(n)throw i}}this.setExpand(this.expand.expands),r()},methods:(0,i.default)({},b(["getOrderDetail","getObjectExpands"]),k(["setService","setCustomerDto","setBrandValue","setCategoryValue","setExpand","removeOrderFilling"]),{load:function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrderFillingData();case 2:return this.setPushName(),e.next=5,this.getCategoryList();case 5:return e.next=7,this.getBrandList();case 7:return e.next=9,this.getExpand();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),setPushName:function(){var e=[this.storeOrderDetail.paymentDto.payType,this.storeOrderDetail.paymentDto.payerType].join("");this.pushName=this.$route.meta.pushName[e]},config:function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=location.href.split("#")[0],e.next=3,this.$initWxConfig(t,["chooseImage","getLocalImgData","uploadImage","scanQRCode","getLocation"]);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleConfirm:function(e){this.orderFilling.purchaseTime=(0,h.default)(e).format("YYYY/MM/DD"),this.expand.timeExpand[0].value=this.orderFilling.purchaseTime},openPicker:function(){if(!this.orderDetail.orderItemDtos[0].customerDeviceDto.purchaseTime){var e=this.orderFilling.purchaseTime;this.timePicker.pickerValue=e?(0,h.default)(e).toDate():(0,h.default)().toDate(),this.$refs.picker.open()}},getOrderFillingData:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.orderId=this.$route.query.orderId,e.next=3,this.getOrderDetail(this.orderId);case 3:this.setService(this.orderId),this.orderFilling=JSON.parse((0,s.default)(this.storeOrderFilling)),this.orderDetail=JSON.parse((0,s.default)(this.storeOrderDetail)),this.orderFilling.purchaseTime&&(this.orderFilling.purchaseTime=(0,h.default)(this.orderFilling.purchaseTime).format("YYYY-MM-DD")),this.expand.expands=this.orderFilling.expand,this.expand.otherExpand=this.expand.expands.filter(function(e){return 1!==e.contentTypeCode&&3!==e.contentTypeCode}),this.expand.timeExpand=this.expand.expands.filter(function(e){return 1===e.contentTypeCode}),this.expand.imageExpand=this.expand.expands.filter(function(e){return 3===e.contentTypeCode}),(t=this.expand.expands.filter(function(e){return 5===e.contentTypeCode})).length>0&&t[0].value&&(r=JSON.parse(t[0].value),this.address.desc=r.addressDescription,this.address.city.name=r.city,this.address.city.id=r.cityId,this.address.county.name=r.county,this.address.county.id=r.countyId,this.address.province.name=r.province,this.address.province.id=r.provinceId);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getCategoryList:function(){var e=(0,d.default)(c.default.mark(function e(){var t=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.orderFilling.category.isJumpingCategory){e.next=3;break}return e.next=3,(0,m.loadData)(function(){return f.default.getCategories(t.orderId)},function(e){1===e.length?(t.orderFilling.category.value=e[0],t.orderFilling.category.isJumpingCategory=!1):t.orderFilling.category.isJumpingCategory=!0,t.orderFilling.category.categoryList=e},m.defaultPreHandler,!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getBrandList:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.orderFilling.brand.isJumpingBrand){e.next=6;break}if(t={orderId:this.orderId,categoryId:this.orderFilling.category.value.categoryId,name:"",page:1},!this.orderFilling.category.value.categoryId||this.orderFilling.brand.value.brandId){e.next=5;break}return e.next=5,(0,m.loadData)(function(){return f.default.getBrands(t)},function(e){r.orderFilling.brand.brandList=e},m.defaultPreHandler,!0);case 5:1===this.orderFilling.brand.brandList.length?(this.orderFilling.brand.value=this.orderFilling.brand.brandList[0],this.orderFilling.brand.isJumpingBrand=!1):this.orderFilling.brand.isJumpingBrand=!0;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getExpand:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={servicePackId:this.orderFilling.service.servicePackId,categoryId:this.orderFilling.category.value.categoryId},this.expand.expands=JSON.parse((0,s.default)(this.orderFilling.expand)),!this.orderFilling.category.value.categoryId||0!==this.expand.expands.length){e.next=8;break}return e.next=5,this.getObjectExpands(t);case 5:r=JSON.parse((0,s.default)(this.storeOrderFilling)),this.expand.expands=r.expand,g.default.forEach(this.expand.expands,function(e){e.isNull?e.state="success":e.state="default",(0,n.default)(e,{value:null})});case 8:if(this.expand.otherExpand=this.expand.expands.filter(function(e){return 1!==e.contentTypeCode&&3!==e.contentTypeCode}),this.expand.timeExpand=this.expand.expands.filter(function(e){return 1===e.contentTypeCode}),this.expand.timeExpand&&this.expand.timeExpand.length>0&&(this.orderFilling.purchaseTime?this.expand.timeExpand[0].value=this.orderFilling.purchaseTime:this.orderFilling.purchaseTime=this.expand.timeExpand[0].value),this.expand.imageExpand=this.expand.expands.filter(function(e){return 3===e.contentTypeCode}),a=this.expand.expands.filter(function(e){return 5===e.contentTypeCode}),this.expand.showLocation=!!(a.length>0&&a[0].value),!(a.length>0)||a[0].value){e.next=17;break}return e.next=17,this.fixPosition();case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fixPosition:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=navigator.userAgent,!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?(r=this,v.default.getLocation({type:"wgs84",success:function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.loadData)(function(){return f.default.geocode(t.latitude,t.longitude,3)},function(e){e&&(r.address.province.id=e.provinceId,r.address.city.id=e.cityId,r.address.county.id=e.districtId,r.address.desc=e.street),r.expand.showLocation=!0},m.defaultPreHandler,!0);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),fail:function(){r.toast("获取不到位置信息"),r.expand.showLocation=!0},cancel:function(){r.expand.showLocation=!0}})):navigator.geolocation&&(a={timeout:3e3,maximumAge:0},navigator.geolocation.getCurrentPosition(this.geoSuccess,this.geoError,a));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),geoSuccess:function(){var e=(0,d.default)(c.default.mark(function e(t){var r=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.loadData)(function(){return f.default.geocode(t.coords.latitude,t.coords.longitude,3)},function(e){e&&(r.address.province.id=e.provinceId,r.address.city.id=e.cityId,r.address.county.id=e.districtId,r.address.desc=e.street)},m.defaultPreHandler,!0);case 2:this.expand.showLocation=!0;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),geoError:function(e){switch(e.code){case e.POSITION_UNAVAILABLE:case e.TIMEOUT:this.toast("获取不到位置信息");break;case e.UNKNOWN_ERROR:this.toast("未知错误")}this.expand.showLocation=!0},setPickerDefaultIndex:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=e.getSlotValues(0).find(function(e){return e[r]===t});a&&e.setSlotValue(0,a)},getGeography:function(){var e=(0,d.default)(c.default.mark(function e(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={geographyType:n,parentId:a},e.next=3,(0,m.loadData)(function(){return f.default.getGeography(r)},function(e){t.setSlotValues(0,e.geographyDtos)},m.defaultPreHandler,!0);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),chooseProvince:function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$refs.provincePickerObject[0],this.address.province=t.getValues()[0],this.provincePicker.show=!1,this.cityPicker.show=!0;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),chooseCity:function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$refs.cityPickerObject[0],this.address.city=t.getValues()[0],this.cityPicker.show=!1,this.countyPicker.show=!0;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),chooseCounty:function(){var e=this.$refs.countyPickerObject[0];this.address.county=e.getSlotValue(0),this.countyPicker.show=!1},goToPageCategory:function(){this.orderFilling.category.isJumpingCategory&&this.$router.push({name:"Category",query:{orderId:this.orderId}})},goToPageBrand:function(){this.orderFilling.category.value.categoryId&&this.orderFilling.brand.isJumpingBrand&&this.$router.push({name:"Brand",query:{category:this.orderFilling.category.value.categoryId,orderId:this.orderId,projectId:this.storeOrderDetail.projectId}})},scanQRCode:function(e){var t=this,r=g.default.findIndex(this.expand.otherExpand,{id:e});v.default.scanQRCode({desc:"scanQRCode desc",needResult:1,scanType:["qrCode","barCode"],success:function(e){var a=e.resultStr,n=e.resultStr.indexOf(",")+1;a=a.slice(n),t.expand.otherExpand[r].value=a,t.$set(t.expand.otherExpand,r,t.expand.otherExpand[r])},error:function(e){e.errMsg.indexOf("function_not_exist")>0&&alert("版本过低请升级")}})},chooseImage:function(e){var t=this;this.expand.submitImage=!0;var r=g.default.findIndex(this.expand.imageExpand,{id:e});v.default.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(){var e=(0,d.default)(c.default.mark(function e(a){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$set(t.expand.imageExpand[r],"src",a.localIds[0]),t.$set(t.expand.imageExpand[r],"save",!0),t.uploadImage(r,a.localIds[0]);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),fail:function(){t.expand.submitImage=!1},cancel:function(){t.expand.submitImage=!1}})},getLocalImageDate:function(e,t){var r=this;v.default.getLocalImgData({localId:t,success:function(t){var a=t.localData;r.$set(r.expand.imageExpand[e],"src",a)}})},uploadImage:function(e,t){var r=this;v.default.uploadImage({localId:t,isShowProgressTips:1,success:function(a){r.expand.imageExpand[e].value=a.serverId;!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&r.getLocalImageDate(e,t),r.expand.submitImage=!1},fail:function(){this.toast("图片上传失败，请重试"),r.expand.submitImage=!1}})},confirmExpands:function(){var e=this,t=this.expand.expands.filter(function(e){return!e.isNull}),r=t.filter(function(e){return""!==e.regex}),a=g.default.filter(t,{regex:""});return g.default.forEach(a,function(e){e.value?e.state="success":e.state="default"}),g.default.forEach(r,function(t){var r=new RegExp(t.regex,"i");if(t.value){var a=r.test(t.value);t.state=a?"success":"default"}else t.state="default";if(1===t.contentTypeCode&&t.value){var n=(0,h.default)(t.value).toDate(),i=e.orderDetail.submitTime,s=(0,h.default)(i).toDate();parseInt((s-n)/1e3/60/60/24)>t.regex?t.state="default":t.state="success"}}),this.expand.expands.find(function(e){return"default"===e.state})},toast:function(e){(0,l.Toast)({message:e,position:"middle",duration:2e3})},confirm:function(){this.expand.confirm=!1;var e=this.confirmExpands(),t=this.expand.expands.find(function(e){return 5===e.contentTypeCode});if(t&&(t=!t.isNull),/^([A-Za-z\u4e00-\u9fa5]{2,14})$/.test(this.orderFilling.customerDto.customerName))if(/^(86)*0*1\d{10}$/.test(this.orderFilling.customerDto.phoneNumber))if(this.orderFilling.category.value.categoryId)if(this.orderFilling.brand.value.brandId)if(t&&!this.address.province.id)this.toast("请选择省");else if(t&&!this.address.city.id)this.toast("请选择市");else if(t&&!this.address.county.id)this.toast("请选择县");else if(t&&""===this.address.desc)this.toast("请输入详细地址");else if(e){var r=void 0;r=""===e.regexMsg?1===e.contentTypeCode?"购机时间不可为空":e.name+"不可为空":e.regexMsg,this.toast(r)}else this.expand.confirm=!0;else this.toast("请选择品牌");else this.toast("请选择品类");else this.toast("请输入11位手机号");else this.toast("请输入正确的客户姓名")},postData:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,a,n,i,s,d=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,a=void 0,e.prev=3,n=c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==(t=s.value).contentTypeCode||!t.save){e.next=4;break}return e.next=4,(0,m.loadData)(function(){return f.default.getImage(t.value,20)},function(e){t.value=e.id},m.defaultPreHandler,!0);case 4:case"end":return e.stop()}},e,d)}),i=(0,o.default)(this.expand.expands);case 6:if(t=(s=i.next()).done){e.next=11;break}return e.delegateYield(n(),"t0",8);case 8:t=!0,e.next=6;break;case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(3),r=!0,a=e.t1;case 17:e.prev=17,e.prev=18,!t&&i.return&&i.return();case 20:if(e.prev=20,!r){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return this.setData(),e.next=28,(0,m.loadData)(function(){return f.default.postOrder(d.data)},function(e){if(e){d.orderStatus="submit",d.confirmationInformation=!1;var t=0;0===d.orderDetail.paymentDto.payType&&((0,l.Toast)({message:"已成功发送短信",duration:1e3}),t=1e3),setTimeout(function(){d.removeOrderFilling();var e={};0===t?e.orderId=d.orderId:window.history.pushState({},"title","#/login"),d.$router.push({name:d.pushName,query:e})},t)}else d.ifSubmit=!0},m.boolPreHandler);case 28:case"end":return e.stop()}},e,this,[[3,13,17,25],[18,,20,24]])}));return function(){return e.apply(this,arguments)}}(),confirmBtn:function(){var e=(0,d.default)(c.default.mark(function e(){var t=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifSubmit){e.next=4;break}return this.ifSubmit=!1,e.next=4,(0,m.loadData)(function(){return t.postData()});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),submitOrder:function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,a,n,i,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.expand.submitImage){e.next=4;break}this.toast("图片上传中，请稍候..."),e.next=25;break;case 4:for(t=!0,r=!1,a=void 0,e.prev=7,n=(0,o.default)(this.expand.expands);!(t=(i=n.next()).done);t=!0)5===(d=i.value).contentTypeCode&&(d.value=(0,s.default)({addressDescription:this.address.desc,city:this.address.city.name,cityId:this.address.city.id,county:this.address.county.name,countyId:this.address.county.id,province:this.address.province.name,provinceId:this.address.province.id}));e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),r=!0,a=e.t0;case 15:e.prev=15,e.prev=16,!t&&n.return&&n.return();case 18:if(e.prev=18,!r){e.next=21;break}throw a;case 21:return e.finish(18);case 22:return e.finish(15);case 23:this.confirm(),this.expand.confirm&&(this.confirmationInformation=!0);case 25:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(){return e.apply(this,arguments)}}(),setData:function(){var e=this;this.data.orderId=this.$route.query.orderId,this.data.brandId=this.orderFilling.brand.value.brandId,this.data.categoryId=this.orderFilling.category.value.categoryId,this.data.customerName=this.orderFilling.customerDto.customerName,this.data.customerPhone=this.orderFilling.customerDto.phoneNumber,this.data.purchasePrice=this.orderFilling.purchasePrice||"",this.data.serviceOptionItemId=this.orderFilling.service.serviceOptionItemId;var t=[],r="";g.default.forEach(this.expand.expands,function(a){var n={customerDeviceExpandId:a.id,customerDeviceExpandValue:a.value||""};1===a.contentTypeCode&&(n.customerDeviceExpandValue=e.orderFilling.purchaseTime),t.push(n);new RegExp("备注").test(a.name)&&(r=a.value||"")}),this.data.expandData=t,this.data.remark=r||""}}),computed:(0,i.default)({},x({storeOrderDetail:function(e){return e.orderDetail},storeOrderFilling:function(e){return e.orderFilling}}),{isCategoryPlaceholder:function(){return"请选择品类"===this.orderFilling.category.value.categoryName},isBrandPlaceholder:function(){return"请选择品牌"===this.orderFilling.brand.value.brandName}}),watch:{"provincePicker.show":function(e){if(e&&!this.address.province.id){var t=this.$refs.provincePickerObject[0];0===t.getSlotValues(0).length&&this.getGeography(t)}},"cityPicker.show":function(e){e&&(this.address.province.id||(this.cityPicker.show=!1,this.toast("请先选择开户省")))},"countyPicker.show":function(e){e&&(this.address.city.id||(this.countyPicker.show=!1,this.toast("请先选择开户省市")))},"address.province.id":function(e,t){var r=this;e&&this.$nextTick((0,d.default)(c.default.mark(function a(){var n;return c.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==(n=r.$refs.provincePickerObject[0]).getSlotValues(0).length||null!==t){a.next=11;break}return a.next=4,r.getGeography(n);case 4:if(r.setPickerDefaultIndex(n,e,"id"),r.address.province.name=n.getSlotValues(0).find(function(t){return t.id===e})?n.getSlotValues(0).find(function(t){return t.id===e}).name:"",r.address.city.id){a.next=9;break}return a.next=9,r.getGeography(r.$refs.cityPickerObject[0],e,1);case 9:a.next=17;break;case 11:return a.next=13,r.getGeography(r.$refs.cityPickerObject[0],e,1);case 13:r.address.city.id=null,r.address.city.name="",r.address.county.id=null,r.address.county.name="";case 17:case"end":return a.stop()}},a,r)})))},"address.city.id":function(e,t){var r=this;e&&this.$nextTick((0,d.default)(c.default.mark(function a(){var n;return c.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==(n=r.$refs.cityPickerObject[0]).getSlotValues(0).length||null!==t){a.next=11;break}return a.next=4,r.getGeography(n,r.address.province.id,1);case 4:if(r.setPickerDefaultIndex(n,e,"id"),r.address.city.name=n.getSlotValues(0).find(function(t){return t.id===e})?n.getSlotValues(0).find(function(t){return t.id===e}).name:"",r.address.county.id){a.next=9;break}return a.next=9,r.getGeography(r.$refs.countyPickerObject[0],e,1);case 9:a.next=15;break;case 11:return a.next=13,r.getGeography(r.$refs.countyPickerObject[0],e,2);case 13:r.address.county.id=null,r.address.county.name="";case 15:case"end":return a.stop()}},a,r)})))},"address.county.id":function(){var e=(0,d.default)(c.default.mark(function e(t,r){var a=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&this.$nextTick((0,d.default)(c.default.mark(function e(){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=a.$refs.countyPickerObject[0]).getSlotValues(0).length||null!==r){e.next=6;break}return e.next=4,a.getGeography(n,a.address.city.id,2);case 4:a.setPickerDefaultIndex(n,t,"id"),a.address.county.name=n.getSlotValues(0).find(function(e){return e.id===t})?n.getSlotValues(0).find(function(e){return e.id===t}).name:"";case 6:case"end":return e.stop()}},e,a)})));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}}},y4vy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("qVYH"),n=r.n(a),i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"OrderFilling"},[r("div",{staticClass:"fixed_a"},[r("sellProgress",{attrs:{orderStatus:e.orderStatus}}),e._v(" "),r("mt-field",{attrs:{label:"姓名",placeholder:"请输入客户姓名",disableClear:!0},model:{value:e.orderFilling.customerDto.customerName,callback:function(t){e.$set(e.orderFilling.customerDto,"customerName",t)},expression:"orderFilling.customerDto.customerName"}}),e._v(" "),r("mt-field",{attrs:{label:"手机",placeholder:"请输入客户手机号码",type:"tel",disableClear:!0},model:{value:e.orderFilling.customerDto.phoneNumber,callback:function(t){e.$set(e.orderFilling.customerDto,"phoneNumber",t)},expression:"orderFilling.customerDto.phoneNumber"}}),e._v(" "),r("div",[r("div",{staticClass:"container mt_15",on:{click:function(t){e.goToPageCategory()}}},[r("div",{staticClass:"container_c",class:{placeholder:e.isCategoryPlaceholder}},[r("div",{staticClass:"content bg_img_none"},[r("mt-cell",{attrs:{title:"品类",value:e.orderFilling.category.value.categoryName}})],1),e._v(" "),r("span",{staticClass:"link"})])]),e._v(" "),r("div",{staticClass:"container",on:{click:function(t){e.goToPageBrand()}}},[r("div",{staticClass:"container_c",class:{placeholder:e.isBrandPlaceholder}},[r("div",{staticClass:"content bg_img_none"},[r("mt-cell",{attrs:{title:"品牌",value:e.orderFilling.brand.value.brandName}})],1),e._v(" "),r("span",{staticClass:"link"})])]),e._v(" "),e._l(e.expand.otherExpand,function(t){return r("div",{staticClass:"container bg_img_none"},[5===t.contentTypeCode?r("div",{staticClass:"geography bg_img_none"},[r("div",{staticClass:"container",class:{address:""!==e.address.province.name},on:{click:function(t){e.provincePicker.show=e.expand.showLocation}}},[r("mt-field",{attrs:{label:"省",placeholder:"请选择省",disabled:!0},model:{value:e.address.province.name,callback:function(t){e.$set(e.address.province,"name",t)},expression:"address.province.name"}})],1),e._v(" "),r("mt-popup",{staticClass:"upimg-popup",attrs:{position:"bottom","lock-scroll":"true",closeOnClickModal:!1},model:{value:e.provincePicker.show,callback:function(t){e.$set(e.provincePicker,"show",t)},expression:"provincePicker.show"}},[r("div",{on:{touchmove:function(e){e.preventDefault()}}},[r("div",{staticClass:"popup-top clear"},[r("mt-button",{staticClass:"popup-button cancel",attrs:{type:"primary",size:"small"},on:{click:function(t){e.provincePicker.show=!1}}},[e._v("取消\n                ")]),e._v(" "),r("mt-button",{staticClass:"popup-button",attrs:{type:"primary",size:"small"},on:{click:function(t){e.chooseProvince()}}},[e._v("确定")])],1),e._v(" "),r("mt-picker",{ref:"provincePickerObject",refInFor:!0,attrs:{slots:e.provincePicker.slot,"value-key":"name"}})],1)]),e._v(" "),r("div",{staticClass:"container",class:{address:""!==e.address.city.name},on:{click:function(t){e.cityPicker.show=e.expand.showLocation}}},[r("mt-field",{attrs:{label:"市",placeholder:"请选择市",disabled:!0},model:{value:e.address.city.name,callback:function(t){e.$set(e.address.city,"name",t)},expression:"address.city.name"}})],1),e._v(" "),r("mt-popup",{staticClass:"upimg-popup",attrs:{position:"bottom","lock-scroll":"true",closeOnClickModal:!1},model:{value:e.cityPicker.show,callback:function(t){e.$set(e.cityPicker,"show",t)},expression:"cityPicker.show"}},[r("div",{on:{touchmove:function(e){e.preventDefault()}}},[r("div",{staticClass:"popup-top clear"},[r("mt-button",{staticClass:"popup-button cancel",attrs:{type:"primary",size:"small"},on:{click:function(t){e.cityPicker.show=!1}}},[e._v("取消\n                ")]),e._v(" "),r("mt-button",{staticClass:"popup-button",attrs:{type:"primary",size:"small"},on:{click:function(t){e.chooseCity()}}},[e._v("确定")])],1),e._v(" "),r("mt-picker",{ref:"cityPickerObject",refInFor:!0,attrs:{slots:e.cityPicker.slot,"value-key":"name"}})],1)]),e._v(" "),r("div",{staticClass:"container",class:{address:""!==e.address.county.name},on:{click:function(t){e.countyPicker.show=e.expand.showLocation}}},[r("mt-field",{attrs:{label:"县",placeholder:"请选择县",disabled:!0},model:{value:e.address.county.name,callback:function(t){e.$set(e.address.county,"name",t)},expression:"address.county.name"}})],1),e._v(" "),r("mt-popup",{staticClass:"upimg-popup",attrs:{position:"bottom","lock-scroll":"true",closeOnClickModal:!1},model:{value:e.countyPicker.show,callback:function(t){e.$set(e.countyPicker,"show",t)},expression:"countyPicker.show"}},[r("div",{on:{touchmove:function(e){e.preventDefault()}}},[r("div",{staticClass:"popup-top clear"},[r("mt-button",{staticClass:"popup-button cancel",attrs:{type:"primary",size:"small"},on:{click:function(t){e.countyPicker.show=!1}}},[e._v("\n                  取消\n                ")]),e._v(" "),r("mt-button",{staticClass:"popup-button",attrs:{type:"primary",size:"small"},on:{click:function(t){e.chooseCounty()}}},[e._v("确定")])],1),e._v(" "),r("mt-picker",{ref:"countyPickerObject",refInFor:!0,attrs:{slots:e.countyPicker.slot,"value-key":"name"}})],1)]),e._v(" "),r("mt-field",{attrs:{readonly:!e.expand.showLocation,label:"详细地址",placeholder:"请输入详细地址",type:"textarea",rows:"2",disableClear:!0},model:{value:e.address.desc,callback:function(t){e.$set(e.address,"desc",t)},expression:"address.desc"}})],1):r("div",[r("mt-field",{attrs:{label:t.name,placeholder:t.describe,disableClear:!0},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}},[4===t.contentTypeCode?r("span",{staticClass:"scan_icon",on:{click:function(r){e.scanQRCode(t.id)}}},[r("img",{attrs:{src:"/static/we-icon.png"}})]):e._e()])],1)])}),e._v(" "),e.orderFilling.purchasePrice?r("div",{staticClass:"container bg_img_none"},[r("mt-cell",{attrs:{title:"购机价格",value:e.orderFilling.purchasePrice}})],1):e._e(),e._v(" "),e.orderFilling.purchaseTime||1===e.expand.timeExpand.length?r("div",{staticClass:"container bg_img_none",class:{placeholder:!e.orderFilling.purchaseTime},on:{click:function(t){e.openPicker()}}},[r("mt-cell",{attrs:{title:"购机时间",value:e.orderFilling.purchaseTime||"请选择购机时间"}})],1):e._e(),e._v(" "),r("div",{staticClass:"geography"},[r("mt-datetime-picker",{ref:"picker",staticClass:"timePicker",attrs:{"lock-scroll":"true",type:"date",endDate:e.timePicker.maxDate,"year-format":"{value}"},on:{confirm:e.handleConfirm},model:{value:e.timePicker.pickerValue,callback:function(t){e.$set(e.timePicker,"pickerValue",t)},expression:"timePicker.pickerValue"}})],1),e._v(" "),e.orderFilling.service.unitPrice?r("div",{staticClass:"container bg_img_none"},[r("mt-cell",{attrs:{title:e.orderFilling.service.serviceItemName,value:e.orderFilling.service.unitPrice+" 元"}})],1):e._e()],2),e._v(" "),r("div",{staticClass:"img_container"},e._l(e.expand.imageExpand,function(t){return r("div",{staticClass:"pic"},[r("div",{staticClass:"img",on:{click:function(r){e.chooseImage(t.id)}}},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.src,expression:"item.src"}],attrs:{src:t.src}})]),e._v(" "),r("p",{staticClass:"title"},[e._v(e._s(t.name))])])})),e._v(" "),r("div",{staticClass:"fixButton"},[r("div",{staticClass:"mt_15 w_90 mb_15"},[r("mt-button",{attrs:{size:"large",type:"primary"},on:{click:function(t){e.submitOrder()}}},[e._v("提交")])],1)])],1),e._v(" "),r("mt-popup",{staticClass:"confirmation-information",attrs:{position:"center",closeOnClickModal:!1,"lock-scroll":"true"},model:{value:e.confirmationInformation,callback:function(t){e.confirmationInformation=t},expression:"confirmationInformation"}},[r("div",{staticClass:"conInf"},[r("div",{staticClass:"conInf-con"},[r("div",{staticClass:"confirmTitle",staticStyle:{"text-align":"center"}},[e._v("确认提交")]),e._v(" "),r("p",{staticClass:"clear"},[r("span",[e._v("姓名:")]),r("span",[e._v(e._s(e.orderFilling.customerDto.customerName))])]),e._v(" "),r("p",{staticClass:"clear"},[r("span",[e._v("手机:")]),r("span",[e._v(e._s(e.orderFilling.customerDto.phoneNumber))])]),e._v(" "),r("p",{staticClass:"clear"},[r("span",[e._v("产品:")]),r("span",[e._v(e._s(e.orderFilling.service.serviceItemName))])]),e._v(" "),r("p",{staticClass:"clear"},[r("span",[e._v("售价:")]),r("span",[e._v(e._s(e.orderFilling.service.unitPrice))])])]),e._v(" "),r("div",{staticClass:"btn"},[r("mt-button",{attrs:{type:"default"},on:{click:function(t){e.confirmationInformation=!1}}},[e._v("否")]),e._v(" "),r("mt-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmBtn()}}},[e._v("是")])],1)])])],1)},staticRenderFns:[]},s=function(e){r("q8zd")},o=r("VU/8")(n.a,i,!1,s,"data-v-2ccf3d1c",null);t.default=o.exports}});
//# sourceMappingURL=25.093816879ed42fbf0721.js.map