{"version":3,"sources":["webpack:///./src/components/ranking/ranking.vue?5bbf","webpack:///./src/components/ranking/ranking.vue","webpack:///src/components/ranking/ranking.vue"],"names":["ranking_ranking","render","_vm","this","_h","$createElement","_c","_self","staticClass","personList","length","attrs","slot","_v","_e","_l","item","on","click","$event","goToPagePersonRanking","reportConfigId","is-link","_s","name","reportType","rankings","weekTime","monthTime","description","storeList","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","ranking_default","a","__webpack_exports__","_vuex","_utils","created","_ref","_asyncToGenerator3","default","_regenerator2","mark","_callee","getOrganizationInfo","getList","project","filter","projectList","next","methods","_extends3","mapActions","storeId","store","obj","defaultPreHandler","_step","value","reportConfigsItem"],"mappings":"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","file":"static/js/42.2565a943b43a815683a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Ranking bg_img_none\"},[(_vm.personList.length > 0)?_c('div',{staticClass:\"title\"},[_c('mt-cell',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"个人销售排行榜\")])])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"content\"},_vm._l((_vm.personList),function(item){return _c('div',{staticClass:\"week\",on:{\"click\":function($event){_vm.goToPagePersonRanking(item.reportConfigId)}}},[_c('mt-cell',{attrs:{\"is-link\":\"\"}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"mint-cell-text\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),(item.reportType === 10)?_c('span',{staticClass:\"label\"},[_vm._v(\"(\"+_vm._s(_vm.rankings.weekTime)+\")\")]):_c('span',{staticClass:\"label\"},[_vm._v(\"(\"+_vm._s(_vm.rankings.monthTime)+\")\")])]),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-label\"},[_vm._v(_vm._s(item.description))])])])],1)})),_vm._v(\" \"),(_vm.storeList.length > 0)?_c('div',{staticClass:\"title bg_img_none\"},[_c('mt-cell',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"店面龙虎榜\")])])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"content\"},_vm._l((_vm.storeList),function(item){return _c('div',{staticClass:\"week\",on:{\"click\":function($event){_vm.goToPagePersonRanking(item.reportConfigId)}}},[_c('mt-cell',{attrs:{\"is-link\":\"\"}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"mint-cell-text\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),(item.reportType === 10)?_c('span',{staticClass:\"label\"},[_vm._v(\"(\"+_vm._s(_vm.rankings.weekTime)+\")\")]):_c('span',{staticClass:\"label\"},[_vm._v(\"(\"+_vm._s(_vm.rankings.monthTime)+\")\")])]),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-label\"},[_vm._v(_vm._s(item.description))])])])],1)})),_vm._v(\" \"),(_vm.showNull)?_c('div',{staticClass:\"null_data\"},[_c('div',{staticClass:\"null\"}),_vm._v(\" \"),_c('p',[_vm._v(\"暂无排行\")])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41b7136e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ranking/ranking.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41b7136e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ranking.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ranking.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41b7136e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ranking.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41b7136e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ranking/ranking.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"Ranking bg_img_none\">\n    <div class=\"title\" v-if=\"personList.length > 0\">\n      <mt-cell><p slot=\"title\">个人销售排行榜</p></mt-cell>\n    </div>\n    <div class=\"content\">\n      <div class=\"week\" v-for=\"item in personList\" @click=\"goToPagePersonRanking(item.reportConfigId)\">\n        <mt-cell is-link>\n          <div slot=\"title\">\n            <span class=\"mint-cell-text\">\n              <span class=\"name\">{{ item.name }}</span>\n              <span class=\"label\" v-if=\"item.reportType === 10\">({{ rankings.weekTime }})</span>\n              <span class=\"label\" v-else>({{ rankings.monthTime }})</span>\n            </span>\n            <span class=\"mint-cell-label\">{{ item.description }}</span>\n          </div>\n        </mt-cell>\n      </div>\n    </div>\n    <div class=\"title bg_img_none\" v-if=\"storeList.length > 0\">\n      <mt-cell><p slot=\"title\">店面龙虎榜</p></mt-cell>\n    </div>\n    <div class=\"content\">\n      <div class=\"week\" v-for=\"item in storeList\" @click=\"goToPagePersonRanking(item.reportConfigId)\">\n        <mt-cell is-link>\n          <div slot=\"title\">\n            <span class=\"mint-cell-text\">\n              <span class=\"name\">{{ item.name }}</span>\n              <span class=\"label\" v-if=\"item.reportType === 10\">({{ rankings.weekTime }})</span>\n              <span class=\"label\" v-else>({{ rankings.monthTime }})</span>\n            </span>\n            <span class=\"mint-cell-label\">{{ item.description }}</span>\n          </div>\n        </mt-cell>\n      </div>\n    </div>\n    <div class=\"null_data\" v-if=\"showNull\">\n      <div class=\"null\"></div>\n      <p>暂无排行</p>\n    </div>\n  </div>\n</template>\n<script>\n  import {mapActions} from 'vuex'\n  import api from '../../api/index2'\n  import { loadData, defaultPreHandler } from '../../common/utils'\n\n  export default {\n    name: 'Ranking',\n    data () {\n      return {\n        showNull: false,\n        rankings: {\n          weekTime: {},\n          monthTime: {},\n          reportConfigs: []\n        },\n        personList: [],\n        storeList: [],\n        storeId: '',\n        project: ''\n      }\n    },\n    async created () {\n      await this.getOrganizationInfo()\n      await this.getList()\n    },\n    beforeRouteLeave (to, from, next) {\n      if (to.name === 'ChooseRankingProject') {\n        let projectList = this.$store.state.project\n          .filter((item) => {\n            return item.projectList.length > 0\n          })\n        let projectInfo = projectList[0].projectList\n        if (projectList.length === 1 && projectInfo.length === 1) {\n          next(false)\n          this.$router.go(-2)\n        } else {\n          next()\n        }\n      } else {\n        next()\n      }\n    },\n    methods: {\n      ...mapActions(['getProject']),\n      async getOrganizationInfo () {\n        await loadData(() => { return this.getProject() })\n      },\n      goToPagePersonRanking (reportConfigId) {\n        this.$router.push({\n          name: 'PersonRanking',\n          query: {\n            reportConfigId,\n            store: this.storeId,\n            project: this.project\n          }\n        })\n      },\n      async getList () {\n        this.storeId = Number(this.$route.query.store)\n        this.project = Number(this.$route.query.project)\n        let obj = {\n          storeId: this.storeId,\n          projectId: this.project\n        }\n        await loadData(() => {\n          return api.getRankings(obj)\n        }, (rankings) => {\n          this.rankings = rankings\n          this.showNull = this.rankings.reportConfigs.length === 0\n        }, defaultPreHandler)\n        for (let reportConfigsItem of this.rankings.reportConfigs) {\n          if (reportConfigsItem.summaryType === 210) {\n            this.personList.push(reportConfigsItem)\n          } else if (reportConfigsItem.summaryType === 110 || reportConfigsItem.summaryType === 120) {\n            this.storeList.push(reportConfigsItem)\n          }\n        }\n      }\n    }\n  }\n</script>\n<style scoped>\n  .title p{\n    font-size: 14px;\n    color: #888;\n  }\n  .week:not(:last-child)::after {\n    content: \" \";\n    display: block;\n    width: calc(100% - 15px);\n    margin-left: 15px;\n    height: 1px;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n    background: #e5e5e5;\n  }\n  .content{\n    background: #fff;\n  }\n  .label{\n    color: #888;\n    font-size: 12px;\n    margin-top: 6px;\n  }\n  .name{\n    margin-right: 10px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ranking/ranking.vue"],"sourceRoot":""}