{"version":3,"sources":["webpack:///./src/components/sell/114/114_brand.vue?015d","webpack:///./src/components/sell/114/114_brand.vue","webpack:///src/components/sell/114/114_brand.vue"],"names":["_14_114_brand","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","placeholder","disableClear","model","value","callback","$$v","filter","expression","aria-hidden","_v","popularBrand","length","_l","item","on","click","$event","selectBrand","touchstart","start","touchend","end","_s","brandName","_e","directives","name","rawName","infinite-scroll-disabled","infinite-scroll-distance","brandList","key","id","index","cell","title","noMore","loading","color","type","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","_14_brand_default","a","__webpack_exports__","_utils","created","_ref","_asyncToGenerator3","default","_regenerator2","mark","_callee","category","getPopularBrandList","methods","_extends3","mapMutations","wrap","_context2","getBrandList","sku","storeId","projectId","categoryId","data","defaultPreHandler","_this3","toUpperCase","isJumpingBrand","orderFilling","JSON","parse","window","localStorage","getItem","event","loadMore","computed","mapState"],"mappings":"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","file":"static/js/38.44334fdc17d22f1ec69e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Brand bg_img_none\"},[_c('mt-field',{attrs:{\"placeholder\":\"输入查询的品牌 如Apple/苹果\",\"disableClear\":true},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}},[_c('i',{staticClass:\"fa fa-search\",attrs:{\"aria-hidden\":\"true\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"list\"},[(_vm.popularBrand.length > 0)?_c('div',[_c('p',{staticClass:\"title\"},[_vm._v(\"热门品牌\")]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},_vm._l((_vm.popularBrand),function(item){return _c('div',{staticClass:\"hot_brand\",on:{\"click\":function($event){_vm.selectBrand(item)},\"touchstart\":function($event){_vm.start()},\"touchend\":function($event){_vm.end()}}},[_vm._v(_vm._s(item.brandName)+\"\\n        \")])}))]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"content\",attrs:{\"infinite-scroll-disabled\":\"brandList.loading\",\"infinite-scroll-distance\":\"300\"}},[_vm._l((_vm.brandList.list),function(item){return _c('div',{key:item.id},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.index))]),_vm._v(\" \"),_vm._l((item.list),function(cell){return _c('div',{staticClass:\"bg_f\",on:{\"touchstart\":function($event){_vm.start()},\"touchend\":function($event){_vm.end()},\"click\":function($event){_vm.selectBrand(cell)}}},[_c('mt-cell',{attrs:{\"title\":cell.brandName}})],1)})],2)}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.brandList.noMore && !_vm.brandList.loading),expression:\"brandList.noMore && !brandList.loading\"}],staticClass:\"load noMore\"},[_vm._v(\"已无更多\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.brandList.loading),expression:\"brandList.loading\"}],staticClass:\"load\"},[_c('mt-spinner',{attrs:{\"color\":\"#d4d4d4\",\"type\":\"fading-circle\"}}),_vm._v(\"\\n        正在加载\\n      \")],1)],2)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7e33549f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sell/114/114_brand.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7e33549f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./114_brand.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./114_brand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e33549f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./114_brand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7e33549f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sell/114/114_brand.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"Brand bg_img_none\">\n    <mt-field placeholder=\"输入查询的品牌 如Apple/苹果\" v-model=\"filter\" :disableClear=\"true\">\n      <i class=\"fa fa-search\" aria-hidden=\"true\"></i>\n    </mt-field>\n    <div class=\"list\">\n      <div v-if=\"popularBrand.length > 0\">\n        <p class=\"title\">热门品牌</p>\n        <div class=\"container\">\n          <div v-for=\"item in popularBrand\" class=\"hot_brand\" @click=\"selectBrand(item)\" @touchstart=\"start()\"\n               @touchend=\"end()\">{{item.brandName}}\n          </div>\n        </div>\n      </div>\n      <div class=\"content\" v-infinite-scroll=\"loadMore\"\n           infinite-scroll-disabled=\"brandList.loading\"\n           infinite-scroll-distance=\"300\">\n        <div v-for=\"item in brandList.list\" :key=\"item.id\">\n          <p class=\"title\">{{item.index}}</p>\n          <div class=\"bg_f\" v-for=\"cell in item.list\" @touchstart=\"start()\" @touchend=\"end()\"\n               @click=\"selectBrand(cell)\">\n            <mt-cell :title=\"cell.brandName\"></mt-cell>\n          </div>\n        </div>\n        <div class=\"load noMore\" v-show=\"brandList.noMore && !brandList.loading\">已无更多</div>\n        <div class=\"load\" v-show=\"brandList.loading\">\n          <mt-spinner color=\"#d4d4d4\" type=\"fading-circle\"></mt-spinner>\n          正在加载\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import api from '../../../api/index2'\n  import _ from 'lodash'\n  import { loadData, defaultPreHandler } from '../../../common/utils'\n  import { createNamespacedHelpers } from 'vuex'\n\n  const {mapState, mapMutations} = createNamespacedHelpers('order')\n\n  export default {\n    name: 'hbBrand',\n    data () {\n      return {\n        brandList: {\n          loading: false,\n          noMore: false,\n          page: 0,\n          list: []\n        },\n        categoryId: null,\n        orderId: null,\n        filter: '',\n        popularBrand: []\n      }\n    },\n    async created () {\n      this.categoryId = this.$route.query.category\n      await this.getPopularBrandList()\n    },\n    methods: {\n      ...mapMutations(['setBrandValue']),\n      executeLoadingProducts: _.debounce(async function () {\n        this.brandList.page = 1\n        await this.getBrandList()\n      }, 300),\n      async getPopularBrandList () {\n        let popularBrand = {\n          serviceOptionItemId: this.$route.query.sku,\n          storeId: this.$route.query.storeId,\n          projectId: this.$route.query.projectId,\n          categoryId: this.categoryId\n        }\n        await loadData(() => {\n          return api.popular(popularBrand)\n        }, (data) => {\n          this.popularBrand = data\n        }, defaultPreHandler)\n      },\n      async getBrandList () {\n        let params = {\n          sku: this.$route.query.sku,\n          categoryId: this.categoryId,\n          name: this.$route.query.name,\n          page: '',\n          limit: ''\n        }\n        if (this.brandList.page === 1) {\n          this.brandList.list = []\n        }\n        await loadData(() => { return api.activationBrands(params) }, (brandList) => {\n          this.setIndex(brandList)\n        }, defaultPreHandler, true)\n        this.brandList.noMore = this.brandList.list.length < (this.brandList.page * 50)\n      },\n      setIndex (data) {\n        _.forEach(data, (item) => {\n          let index = item.brandName.substr(0, 1).toUpperCase()\n          let find = _.find(this.brandList.list, {index})\n          if (!find) {\n            this.brandList.list.push({index: index, list: []})\n          }\n          let arrIndex = _.findIndex(this.brandList.list, {index})\n          this.brandList.list[arrIndex].list.push(item)\n        })\n      },\n      selectBrand (data) {\n        let param = {\n          value: data,\n          isJumpingBrand: this.storeOrderFilling.brand.isJumpingBrand\n        }\n        // if (this.$route.name === 'hbSelectBrand') {\n        let orderFilling = JSON.parse(window.localStorage.getItem('orderFilling'))\n        orderFilling.brand.value = param.value\n        window.localStorage.setItem('orderFilling', JSON.stringify(orderFilling))\n        // } else {\n        //   this.setBrandValue(param)\n        // }\n        this.$router.go(-1)\n      },\n      start () {\n        let eve = window.event\n        eve.currentTarget.style.background = '#f4f3f3'\n      },\n      end () {\n        let eve = window.event\n        eve.currentTarget.style.background = '#fff'\n      },\n      async loadMore () {\n        if (this.brandList.noMore) return\n        this.brandList.loading = true\n        this.brandList.page += 1\n        await this.getBrandList()\n        this.brandList.loading = false\n      }\n    },\n    computed: {\n      ...mapState({\n        storeOrderFilling: state => state.orderFilling\n      })\n    },\n    watch: {\n      'filter': 'executeLoadingProducts'\n    }\n  }\n</script>\n<style scoped>\n  .list {\n    overflow-y: scroll;\n    height: calc(100vh - 40px);\n  }\n\n  .title {\n    color: #888;\n    padding: 10px 15px;\n    font-size: 14px;\n  }\n\n  .container {\n    padding: 0 15px 5px;\n    background: #fff;\n    font-size: 0;\n  }\n\n  .hot_brand {\n    min-width: 3rem;\n    display: inline-block;\n    line-height: 31px;\n    height: 31px;\n    border: 1px solid #f4f3f3;\n    box-sizing: border-box;\n    padding: 0 2%;\n    text-align: center;\n    font-size: 14px;\n    border-radius: 15px;\n    margin: 5px 5px 0 0;\n    background: transparent;\n  }\n\n  .bg_f {\n    background: #fff;\n  }\n\n  .content {\n    overflow-y: scroll;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/sell/114/114_brand.vue"],"sourceRoot":""}