{"version":3,"sources":["webpack:///./src/components/sell/payment/we_chat_pay.vue?decb","webpack:///./src/components/sell/payment/we_chat_pay.vue","webpack:///src/components/sell/payment/we_chat_pay.vue"],"names":["payment_we_chat_pay","render","_h","this","$createElement","_c","_self","directives","name","rawName","value","scan","expression","staticClass","_m","_v","attrs","src","slot","_s","orderCode","payAmount","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","we_chat_pay_default","a","__webpack_exports__","_utils","pushName","created","_ref","_asyncToGenerator3","default","_regenerator2","mark","_callee","orderId","getData","getScan","interval","timeInterval","next","_this","wrap","_context2","paymentId","paymentStatus","_ref3","_callee3","id","defaultPreHandler","data","status"],"mappings":"+HAGAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,KAA7FP,KAA6FQ,KAAAC,WAAA,gBAA8EC,YAAA,cAA0BR,EAAA,OAAYQ,YAAA,SAAjNV,KAAoOW,GAAA,GAApOX,KAAoOY,GAAA,KAAAV,EAAA,OAAkCQ,YAAA,WAAqBR,EAAA,OAAYQ,YAAA,QAAkBR,EAAA,OAAYQ,YAAA,OAAAG,OAA0BC,IAAA,0BAA/Vd,KAAsXQ,QAAtXR,KAA2YY,GAAA,KAAAV,EAAA,OAAwBQ,YAAA,OAAAG,OAA0BC,IAAA,qBAA7bd,KAAodY,GAAA,KAAAV,EAAA,KAAwBQ,YAAA,QAA5eV,KAA8fY,GAAA,cAA9fZ,KAA8fY,GAAA,KAAAV,EAAA,OAA6CQ,YAAA,qBAA+BR,EAAA,WAAAA,EAAA,QAA2BW,OAAOE,KAAA,SAAeA,KAAA,UAA3nBf,KAAyoBY,GAAA,UAAzoBZ,KAAyoBY,GAAA,KAAAV,EAAA,QAA0CQ,YAAA,YAAnrBV,KAAysBY,GAAzsBZ,KAAysBgB,GAAzsBhB,KAAysBiB,gBAAzsBjB,KAAysBY,GAAA,KAAAV,EAAA,WAAAA,EAAA,QAAyEW,OAAOE,KAAA,SAAeA,KAAA,UAAxyBf,KAAszBY,GAAA,QAAtzBZ,KAAszBY,GAAA,KAAAV,EAAA,QAAwCQ,YAAA,UAA91BV,KAAk3BY,GAAA,IAAl3BZ,KAAk3BgB,GAAl3BhB,KAAk3BkB,iBAAA,MAE33BC,iBADjB,WAAoC,IAAapB,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBQ,YAAA,cAAwBR,EAAA,OAAYQ,YAAA,MAAAG,OAAyBC,IAAA,wBAA7Id,KAAyKY,GAAA,KAAAV,EAAA,QAAyBQ,YAAA,eAAlMV,KAA2NY,GAAA,eCU/PQ,EAXA,SAAAC,GACAC,EAAA,SAeAC,EAbAD,EAAA,OAaAE,CACAC,EAAAC,EACA7B,GATA,EAWAuB,EAPA,kBAEA,MAUAO,EAAA,QAAAJ,EAAA,uLCIAD,EAAA,SAGAM,EAAAN,EAAA,wBAEA,6DAGAO,cACA,UACA,eACA,eACA,aACA,QACA,gBAEA,OAEAC,QAAA,WAdA,IAAAC,GAAA,EAAAC,EAAAC,SAAAC,EAAAD,QAAAE,KAAA,SAAAC,gHAeAC,sBACAC,sCACAC,sBAEAC,2GALA,uDAOAC,cACAC,kCAGA,IAAAC,EAAA3C,OACAA,6EACA,OAAAkC,EAAAD,QAAAW,KAAA,SAAAC,4GAEAC,gCAEAC,oBACA,6BACA,8CACA,MAEAT,QAAA,WAZA,IAAAU,GAAA,EAAAhB,EAAAC,SAAAC,EAAAD,QAAAE,KAAA,SAAAc,iKAcAZ,+CAEAnB,wBACAD,mCACAiC,IAEAtB,EAAAuB,mHARA,GASAZ,QAAA,8MAEAO,+BAEAM,wBAGA,mGAPA,wEASAC,sHAEA,+CACA,0CAEAxB,6BAIAQ","file":"static/js/22.ba4c089bd3d2b90761c9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scan !== ''),expression:\"scan !== ''\"}],staticClass:\"WeChatPay\"},[_c('div',{staticClass:\"bg_1\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"qrcode\"},[_c('div',{staticClass:\"img\"},[_c('img',{staticClass:\"scan\",attrs:{\"src\":'data:image/jpeg;base64,' + _vm.scan}}),_vm._v(\" \"),_c('img',{staticClass:\"icon\",attrs:{\"src\":\"/static/￥.png\"}})]),_vm._v(\" \"),_c('p',{staticClass:\"tip\"},[_vm._v(\"扫码付款\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"bg_2 bg_img_none\"},[_c('mt-cell',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"订单编号\")]),_vm._v(\" \"),_c('span',{staticClass:\"color_2\"},[_vm._v(_vm._s(_vm.orderCode))])]),_vm._v(\" \"),_c('mt-cell',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"金额\")]),_vm._v(\" \"),_c('span',{staticClass:\"color\"},[_vm._v(\"￥\"+_vm._s(_vm.payAmount))])])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"t-r clear\"},[_c('img',{staticClass:\"f-l\",attrs:{\"src\":\"/static/wechat.png\"}}),_vm._v(\" \"),_c('span',{staticClass:\"wechat-pay\"},[_vm._v(\"微信支付\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-52773792\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sell/payment/we_chat_pay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52773792\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./we_chat_pay.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./we_chat_pay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52773792\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./we_chat_pay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-52773792\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sell/payment/we_chat_pay.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"WeChatPay\" v-show=\"scan !== ''\">\n    <div class=\"bg_1\">\n      <div class=\"t-r clear\">\n        <img class=\"f-l\" src=\"/static/wechat.png\">\n        <span class=\"wechat-pay\">微信支付</span>\n      </div>\n      <div class=\"qrcode\">\n        <div class=\"img\">\n          <img class=\"scan\" :src=\"'data:image/jpeg;base64,' + scan\"/>\n          <img class=\"icon\" src=\"/static/￥.png\"/>\n        </div>\n\n        <p class=\"tip\">扫码付款</p>\n      </div>\n    </div>\n    <div class=\"bg_2 bg_img_none\">\n      <mt-cell>\n        <span slot=\"title\">订单编号</span>\n        <span class=\"color_2\">{{orderCode}}</span>\n      </mt-cell>\n      <mt-cell>\n        <span slot=\"title\">金额</span>\n        <span class=\"color\">￥{{payAmount}}</span>\n      </mt-cell>\n    </div>\n  </div>\n</template>\n<script>\n  import api from '../../../api/index2'\n  import {loadData, defaultPreHandler} from '../../../common/utils'\n\n  export default {\n    name: 'WeChatPay',\n    data () {\n      return {\n        pushName: this.$route.meta.pushName,\n        pay: false,\n        orderId: null,\n        paymentId: null,\n        orderCode: '',\n        payAmount: '',\n        scan: '',\n        timeInterval: null\n      }\n    },\n    async created () {\n      this.orderId = this.$route.query.orderId\n      await this.getData()\n      await this.getScan()\n      this.interval()\n    },\n    beforeRouteLeave (to, from, next) {\n      clearInterval(this.timeInterval)\n      next()\n    },\n    methods: {\n      interval () {\n        let vue = this\n        this.timeInterval = setInterval(async () => {\n          await loadData(() => {\n            return api.payment(vue.paymentId)\n          }, data => {\n            let paymentStatus = data.paymentStatus\n            vue.pay = paymentStatus === 20\n          }, defaultPreHandler, true)\n        }, 3000)\n      },\n      async getData () {\n        await loadData(() => {\n          return api.getOrderDetail(this.orderId)\n        }, (data) => {\n          this.payAmount = data.paymentDto.payAmount\n          this.orderCode = data.orderCode\n          this.paymentId = data.paymentDto.id\n        }, defaultPreHandler)\n      },\n      async getScan () {\n        await loadData(() => {\n          return api.scan(this.paymentId)\n        }, data => {\n          this.scan = data\n        }, defaultPreHandler, true)\n      }\n    },\n    watch: {\n      'pay': async function (status) {\n        if (status === true) {\n          window.history.pushState({}, 'title', '#/login')\n          window.history.pushState({}, 'title', '#/MyOrder')\n          this.$router.push({\n            name: this.pushName,\n            query: {\n              orderId: this.orderId\n            }\n          })\n        }\n      }\n    }\n  }\n</script>\n<style scoped>\n  @font-face {\n    font-family: 'HYQiHei-55S';\n    src: url('/static/fonts/HYQiHei-55S.otf');\n  }\n\n  @font-face {\n    font-family: 'HYQiHei-80W';\n    src: url('/static/fonts/HYQiHei-80W.otf');\n  }\n\n  .WeChatPay {\n    width: 92%;\n    margin: 4% auto;\n  }\n\n  .bg_1 {\n    background: #23ac38;\n    border-radius: 15px 15px 0 0;\n    padding: 11% 0 16%;\n  }\n\n  .t-r {\n    width: 13rem;\n    margin: auto;\n    line-height: 54px;\n    height: 54px;\n    margin-bottom: 8%;\n  }\n\n  .f-l {\n    width: 47px;\n    margin-top: 2px;\n  }\n\n  .wechat-pay {\n    color: #fff;\n    font-family: HYQiHei-55S;\n    font-size: 2.1rem;\n    letter-spacing: 2px;\n  }\n\n  .qrcode {\n    width: 64%;\n    margin: 0 auto;\n    background: #fff;\n    text-align: center;\n    padding-top: 3.8%;\n  }\n\n  .qrcode .img {\n    width: 100%;\n    margin: auto;\n    position: relative;\n  }\n\n  .scan {\n    width: 86.8%;\n  }\n\n  .icon {\n    position: absolute;\n    top: 38.4%;\n    left: 40%;\n    height: 22.6%;\n    width: 20%;\n    z-index: 1;\n  }\n\n  .tip {\n    font-family: HYQiHei-80W;\n    line-height: 30px;\n    font-size: 18px;\n    letter-spacing: 3px;\n  }\n\n  .bg_2 {\n    background: #fff;\n    border-radius: 0 0 15px 15px;\n    padding: 20px 10px;\n  }\n\n  .color {\n    color: #333;\n    font-weight: bold;\n    font-size: 16px;\n  }\n\n  .color_2 {\n    color: #333;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/sell/payment/we_chat_pay.vue"],"sourceRoot":""}