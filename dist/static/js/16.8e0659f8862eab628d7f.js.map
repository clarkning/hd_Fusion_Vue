{"version":3,"sources":["webpack:///src/components/task/sub_task_detail.vue","webpack:///./src/components/task/sub_task_detail.vue?42d6","webpack:///./src/components/task/sub_task_detail.vue"],"names":["_vuex","__webpack_require__","_utils","created","_ref","_asyncToGenerator3","default","_regenerator2","mark","_callee","personTaskId","getTaskList","getTaskDetail","showSubTaskDetail","methods","_extends3","mapActions","detail","getSameLevelSubTask","getSubLevelSubTask","getSubTaskDetail","getSubTaskPerson","subPersonTaskIds","partnerId","taskId","params","personId","organizationId","_iteratorNormalCompletion","taskItem","_step","value","taskItemId","taskAllotRate","progressRate","status","progress","distribute","obj","_this2","this","arr","item","_this3","storePersonTask","page","list","_this4","_showSubLevelSubTask","length","end","computed","mapState","personTask","task_sub_task_detail","render","_vm","_h","$createElement","_c","_self","staticClass","_l","subTask","attrs","slot","_v","_s","personName","size","type","taskStatus","task","finishRate","organizationNamePath","positionName","key","id","title","name","target","targetType","reward","class","database","taskIncomeObject","star","leaf","aria-hidden","incomeValue","_e","directives","rawName","expression","infinite-scroll-disabled","infinite-scroll-distance","color","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","sub_task_detail_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/16.8e0659f8862eab628d7f.js","sourcesContent":["<template>\n  <div class=\"TaskSchedule SubTaskDetail\">\n    <div class=\"case\" v-for=\"(subTask) in sameLevelSubTask\">\n      <div class=\"subTask bg_img_none\">\n        <mt-cell>\n          <span slot=\"title\">{{subTask.personName}}<mt-badge size=\"normal\" type=\"warning\">{{ subTask.taskStatus }}</mt-badge></span>\n          <span class=\"subTaskSpan\">完成进度: {{ subTask.task.finishRate }}%</span>\n        </mt-cell>\n        <mt-cell>\n          <span class=\"organizeTitle\" slot=\"title\">组织</span>\n          <span class=\"organizeValue\">{{ subTask.organizationNamePath }}</span>\n        </mt-cell>\n        <mt-cell>\n          <span class=\"organizeTitle\" slot=\"title\">职位</span>\n          <span class=\"organizeValue\">{{ subTask.positionName }}</span>\n        </mt-cell>\n      </div>\n      <div class=\"form\">\n        <div class=\"bg_img_none\">\n          <div v-for=\"task in subTask.task.taskItems\" :key=\"task.id\">\n            <div class=\"bg_img_none\">\n              <mt-cell :title=\"task.name\">\n                <span class=\"fontfamily\">{{task.target}}</span>\n                <span class=\"fontfamily\" v-if=\"task.targetType === '销售量'\">单</span>\n                <span class=\"fontfamily\" v-else>元</span>\n              </mt-cell>\n            </div>\n            <div class=\"bg_img_none computed\">\n              <mt-cell title=\"已完成\">\n                <div class=\"flex t-l\">{{task.progressRate}}%</div>\n                <div class=\"flex t-r\">{{task.progress}}</div>\n              </mt-cell>\n            </div>\n          </div>\n        </div>\n        <div class=\"bg_img_none\" v-if=\"subTask.task.reward.length > 0\">\n          <mt-cell>\n            <p slot=\"title\">\n            <span v-for=\"reward in subTask.task.reward\" class=\"t-l w-3 f-s-10\"\n                  :class=\"{ database: reward.taskIncomeObject === '佣金', star: reward.taskIncomeObject === '经验', leaf: reward.taskIncomeObject === '积分'}\">\n              <i class=\"fa\" aria-hidden=\"true\"></i>\n              <span v-if=\"reward.taskIncomeObject === '佣金'\">+{{ reward.incomeValue }} 元</span>\n              <span v-else>+{{ reward.incomeValue }}/{{ reward.taskIncomeObject }}</span>\n            </span>\n            </p>\n          </mt-cell>\n        </div>\n      </div>\n    </div>\n\n    <div v-infinite-scroll = \"loadMore\"\n         infinite-scroll-disabled = \"loading\"\n         infinite-scroll-distance = \"300\">\n      <div class=\"case\" v-for=\"subTask in showSubLevelSubTask\" v-show=\"subTask.decomposition\">\n        <div class=\"subTask bg_img_none\">\n          <mt-cell>\n            <span slot=\"title\">{{subTask.personName}}<mt-badge size=\"normal\" type=\"warning\">{{ subTask.taskStatus }}</mt-badge></span>\n            <span class=\"subTaskSpan\">完成进度: {{ subTask.task.finishRate }}%</span>\n          </mt-cell>\n          <mt-cell>\n            <span class=\"organizeTitle\" slot=\"title\">组织</span>\n            <span class=\"organizeValue\">{{ subTask.organizationNamePath }}</span>\n          </mt-cell>\n          <mt-cell>\n            <span class=\"organizeTitle\" slot=\"title\">职位</span>\n            <span class=\"organizeValue\">{{ subTask.positionName }}</span>\n          </mt-cell>\n        </div>\n        <div class=\"form\">\n          <div class=\"bg_img_none\">\n            <div v-for=\"task in subTask.task.taskItems\" :key=\"task.id\">\n              <div class=\"bg_img_none\">\n                <mt-cell :title=\"task.name\">\n                  <span class=\"fontfamily\">{{task.target}}</span>\n                  <span class=\"fontfamily\" v-if=\"task.targetType === '销售量'\">单</span>\n                  <span class=\"fontfamily\" v-else>元</span>\n                </mt-cell>\n              </div>\n              <div class=\"bg_img_none computed\">\n                <mt-cell title=\"已分配\">\n                  <div class=\"flex t-l\">{{task.taskAllotRate}}%</div>\n                  <div class=\"flex t-r\">{{task.distribute}}</div>\n                </mt-cell>\n                <mt-cell title=\"已完成\">\n                  <div class=\"flex t-l\">{{task.progressRate}}%</div>\n                  <div class=\"flex t-r\">{{task.progress}}</div>\n                </mt-cell>\n              </div>\n            </div>\n          </div>\n          <div class=\"bg_img_none\" v-if=\"subTask.task.reward.length > 0\">\n            <mt-cell>\n              <p slot=\"title\">\n                <span v-for=\"reward in subTask.task.reward\" class=\"t-l w-3 f-s-10\"\n                      :class=\"{ database: reward.taskIncomeObject === '佣金', star: reward.taskIncomeObject === '经验', leaf: reward.taskIncomeObject === '积分'}\">\n                  <i class=\"fa\" aria-hidden=\"true\"></i>\n                  <span v-if=\"reward.taskIncomeObject === '佣金'\">+{{ reward.incomeValue }} 元</span>\n                  <span v-else>+{{ reward.incomeValue }}/{{ reward.taskIncomeObject }}</span>\n                </span>\n              </p>\n            </mt-cell>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"load\" v-show=\"loading\">\n      <mt-spinner color=\"#d4d4d4\" type=\"fading-circle\"></mt-spinner>\n      正在加载\n    </div>\n  </div>\n</template>\n<script>\n  import { mapState, mapActions } from 'vuex'\n  import _ from 'lodash'\n  import {loadData} from '../../common/utils'\n\n  export default {\n    name: 'TaskSchedule',\n    data () {\n      return {\n        personTaskId: null,\n        sameLevelSubTask: [],\n        subLevelSubTask: [],\n        showSubLevelSubTask: [],\n        detail: {\n          task: {\n            taskItems: [],\n            amerce: [],\n            reward: []\n          },\n          personTaskStatus: null,\n          progress: []\n        },\n        noMore: true,\n        loading: false\n      }\n    },\n    async created () {\n      this.personTaskId = Number(this.$route.query.personTaskId)\n      await this.getTaskList()\n      this.getTaskDetail()\n      await loadData(() => { return this.getSubTaskDetail() })\n      this.getTaskDetail()\n      this.showSubTaskDetail()\n      this.showSubLevelSubTask = this.subLevelSubTask.slice(0, 10)\n    },\n    methods: {\n      ...mapActions(['getOrganizationInfo', 'getSameInfo', 'getSubInfo']),\n      ...mapActions('task', [\n        'getPersonTaskList',\n        'getSubTask',\n        'getDetail'\n      ]),\n      getTaskDetail () {\n        let detail = _.find(this.storePersonTask, {personTaskId: this.personTaskId})\n        this.detail = JSON.parse(JSON.stringify(detail))\n      },\n      showSubTaskDetail () {\n        if (this.detail.sameLevelSubTask) {\n          this.getSameLevelSubTask()\n          this.getSubLevelSubTask()\n        }\n      },\n      async getSubTaskDetail () {\n        if (!this.detail.sameLevelSubTask && this.detail.task.taskType === '分解任务') {\n          await this.getSubTaskPerson()\n          let params = {\n            subPersonTaskIds: this.detail.subPersonTaskIds,\n            partnerId: this.detail.partnerId,\n            taskId: this.detail.taskId\n          }\n          await this.getSubTask(params)\n        }\n      },\n      async getSubTaskPerson () {\n        await this.getOrganizationInfo(this.$store.state.person.personId)\n        let organizationId = _.find(this.$store.state.person.orgInfo, {partnerId: this.detail.partnerId}).organizationId\n        await this.getSameInfo(organizationId)\n        await this.getSubInfo(organizationId)\n      },\n      taskProgress (detail) {\n        for (let taskItem of detail.task.taskItems) {\n          let progressItem = _.find(detail.progress, {taskItemId: taskItem.taskItemId})\n          let distribute = parseInt(progressItem.distribute || 0)\n          let taskAllotRate = (distribute / taskItem.target) * 100\n          let progress = progressItem.progress || 0\n          let progressRate = (progress / taskItem.target) * 100\n          if (taskAllotRate > 0 && taskAllotRate < 1) {\n            taskAllotRate = 1\n          } else {\n            taskAllotRate = Math.floor(taskAllotRate)\n          }\n          if (progressRate > 0 && progressRate < 1) {\n            progressRate = 1\n          } else {\n            progressRate = Math.floor(progressRate)\n          }\n          let obj = {\n            status: progressItem.status,\n            progress,\n            progressRate,\n            distribute,\n            taskAllotRate\n          }\n          _.assign(taskItem, obj)\n        }\n      },\n      getSameLevelSubTask () {\n        let arr = this.detail.sameLevelSubTask.filter((item) => {\n          return item.taskStatus && item.taskStatus !== '新建'\n        })\n        this.sameLevelSubTask = JSON.parse(JSON.stringify(arr))\n        _.forEach(this.sameLevelSubTask, item => {\n          this.taskProgress(item)\n        })\n      },\n      getSubLevelSubTask () {\n        let arr = this.detail.subLevelSubTask.filter((item) => {\n          return item.taskStatus && item.taskStatus !== '新建'\n        })\n        this.subLevelSubTask = JSON.parse(JSON.stringify(arr))\n        this.noMore = this.subLevelSubTask.length < 10\n        _.forEach(this.subLevelSubTask, item => {\n          this.taskProgress(item)\n        })\n      },\n      async getTaskList () {\n        if (_.isEmpty(this.storePersonTask)) {\n          let page = 1\n          let vue = this\n          const list = async function () {\n            await vue.getPersonTaskList(page)\n            let detail = _.find(vue.storePersonTask, {personTaskId: vue.personTaskId})\n            if (!detail) {\n              page++\n              await list()\n            } else {\n              let params = {\n                taskId: detail.taskId,\n                personTaskId: detail.personTaskId\n              }\n              await vue.getDetail(params)\n            }\n          }\n          await list()\n        }\n      },\n      loadMore () {\n        if (this.noMore) return\n        this.loading = true\n        setTimeout(() => {\n          let last = this.showSubLevelSubTask.length\n          let end = last + 10\n          this.noMore = this.subLevelSubTask.slice(last, end).length < 10\n          this.showSubLevelSubTask.push(...this.subLevelSubTask.slice(last, end))\n          this.loading = false\n        }, 2000)\n      }\n    },\n    computed: {\n      ...mapState('task', {\n        storePersonTask: state => state.taskList.personTask\n      })\n    }\n  }\n</script>\n<style scoped>\n  .organizeTitle{\n    width: 5rem;\n    display: inline-block;\n  }\n  .organizeValue{\n    line-height: 1.7rem;\n    text-align: right;\n  }\n  .w-3{\n    display: inline-block;\n    padding-right: 10px;\n    line-height: 1.5;\n  }\n  .case{\n    width: 95%;\n    padding: 5px;\n    border-radius: 5px;\n    background: #fff;\n    box-sizing: border-box;\n    margin: 0 auto;\n  }\n  .case{\n    margin-top: 10px;\n  }\n  .case:last-child{\n    margin-bottom: 10px;\n  }\n  .content span{\n    font-size: 14px;\n  }\n  i{\n    margin: 0 3px;\n  }\n  .title p{\n    font-size: 14px;\n    color: #888;\n  }\n  .subTaskSpan{\n    color: #26a2ff;\n    min-width: 5rem;\n    text-align: right;\n  }\n  .flex{\n    flex: 1;\n    color: #888;\n  }\n  .fontfamily{\n    font-weight: bold;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/task/sub_task_detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TaskSchedule SubTaskDetail\"},[_vm._l((_vm.sameLevelSubTask),function(subTask){return _c('div',{staticClass:\"case\"},[_c('div',{staticClass:\"subTask bg_img_none\"},[_c('mt-cell',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(subTask.personName)),_c('mt-badge',{attrs:{\"size\":\"normal\",\"type\":\"warning\"}},[_vm._v(_vm._s(subTask.taskStatus))])],1),_vm._v(\" \"),_c('span',{staticClass:\"subTaskSpan\"},[_vm._v(\"完成进度: \"+_vm._s(subTask.task.finishRate)+\"%\")])]),_vm._v(\" \"),_c('mt-cell',[_c('span',{staticClass:\"organizeTitle\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"组织\")]),_vm._v(\" \"),_c('span',{staticClass:\"organizeValue\"},[_vm._v(_vm._s(subTask.organizationNamePath))])]),_vm._v(\" \"),_c('mt-cell',[_c('span',{staticClass:\"organizeTitle\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"职位\")]),_vm._v(\" \"),_c('span',{staticClass:\"organizeValue\"},[_vm._v(_vm._s(subTask.positionName))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"bg_img_none\"},_vm._l((subTask.task.taskItems),function(task){return _c('div',{key:task.id},[_c('div',{staticClass:\"bg_img_none\"},[_c('mt-cell',{attrs:{\"title\":task.name}},[_c('span',{staticClass:\"fontfamily\"},[_vm._v(_vm._s(task.target))]),_vm._v(\" \"),(task.targetType === '销售量')?_c('span',{staticClass:\"fontfamily\"},[_vm._v(\"单\")]):_c('span',{staticClass:\"fontfamily\"},[_vm._v(\"元\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"bg_img_none computed\"},[_c('mt-cell',{attrs:{\"title\":\"已完成\"}},[_c('div',{staticClass:\"flex t-l\"},[_vm._v(_vm._s(task.progressRate)+\"%\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex t-r\"},[_vm._v(_vm._s(task.progress))])])],1)])})),_vm._v(\" \"),(subTask.task.reward.length > 0)?_c('div',{staticClass:\"bg_img_none\"},[_c('mt-cell',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},_vm._l((subTask.task.reward),function(reward){return _c('span',{staticClass:\"t-l w-3 f-s-10\",class:{ database: reward.taskIncomeObject === '佣金', star: reward.taskIncomeObject === '经验', leaf: reward.taskIncomeObject === '积分'}},[_c('i',{staticClass:\"fa\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),(reward.taskIncomeObject === '佣金')?_c('span',[_vm._v(\"+\"+_vm._s(reward.incomeValue)+\" 元\")]):_c('span',[_vm._v(\"+\"+_vm._s(reward.incomeValue)+\"/\"+_vm._s(reward.taskIncomeObject))])])}))])],1):_vm._e()])])}),_vm._v(\" \"),_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],attrs:{\"infinite-scroll-disabled\":\"loading\",\"infinite-scroll-distance\":\"300\"}},_vm._l((_vm.showSubLevelSubTask),function(subTask){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(subTask.decomposition),expression:\"subTask.decomposition\"}],staticClass:\"case\"},[_c('div',{staticClass:\"subTask bg_img_none\"},[_c('mt-cell',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(subTask.personName)),_c('mt-badge',{attrs:{\"size\":\"normal\",\"type\":\"warning\"}},[_vm._v(_vm._s(subTask.taskStatus))])],1),_vm._v(\" \"),_c('span',{staticClass:\"subTaskSpan\"},[_vm._v(\"完成进度: \"+_vm._s(subTask.task.finishRate)+\"%\")])]),_vm._v(\" \"),_c('mt-cell',[_c('span',{staticClass:\"organizeTitle\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"组织\")]),_vm._v(\" \"),_c('span',{staticClass:\"organizeValue\"},[_vm._v(_vm._s(subTask.organizationNamePath))])]),_vm._v(\" \"),_c('mt-cell',[_c('span',{staticClass:\"organizeTitle\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"职位\")]),_vm._v(\" \"),_c('span',{staticClass:\"organizeValue\"},[_vm._v(_vm._s(subTask.positionName))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"bg_img_none\"},_vm._l((subTask.task.taskItems),function(task){return _c('div',{key:task.id},[_c('div',{staticClass:\"bg_img_none\"},[_c('mt-cell',{attrs:{\"title\":task.name}},[_c('span',{staticClass:\"fontfamily\"},[_vm._v(_vm._s(task.target))]),_vm._v(\" \"),(task.targetType === '销售量')?_c('span',{staticClass:\"fontfamily\"},[_vm._v(\"单\")]):_c('span',{staticClass:\"fontfamily\"},[_vm._v(\"元\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"bg_img_none computed\"},[_c('mt-cell',{attrs:{\"title\":\"已分配\"}},[_c('div',{staticClass:\"flex t-l\"},[_vm._v(_vm._s(task.taskAllotRate)+\"%\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex t-r\"},[_vm._v(_vm._s(task.distribute))])]),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"已完成\"}},[_c('div',{staticClass:\"flex t-l\"},[_vm._v(_vm._s(task.progressRate)+\"%\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex t-r\"},[_vm._v(_vm._s(task.progress))])])],1)])})),_vm._v(\" \"),(subTask.task.reward.length > 0)?_c('div',{staticClass:\"bg_img_none\"},[_c('mt-cell',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},_vm._l((subTask.task.reward),function(reward){return _c('span',{staticClass:\"t-l w-3 f-s-10\",class:{ database: reward.taskIncomeObject === '佣金', star: reward.taskIncomeObject === '经验', leaf: reward.taskIncomeObject === '积分'}},[_c('i',{staticClass:\"fa\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),(reward.taskIncomeObject === '佣金')?_c('span',[_vm._v(\"+\"+_vm._s(reward.incomeValue)+\" 元\")]):_c('span',[_vm._v(\"+\"+_vm._s(reward.incomeValue)+\"/\"+_vm._s(reward.taskIncomeObject))])])}))])],1):_vm._e()])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"load\"},[_c('mt-spinner',{attrs:{\"color\":\"#d4d4d4\",\"type\":\"fading-circle\"}}),_vm._v(\"\\n    正在加载\\n  \")],1)],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16d21b0f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/task/sub_task_detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16d21b0f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sub_task_detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sub_task_detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16d21b0f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./sub_task_detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-16d21b0f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/task/sub_task_detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}