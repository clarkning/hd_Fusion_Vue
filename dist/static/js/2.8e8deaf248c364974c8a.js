webpackJsonp([2],{"/NU+":function(t,e){},VRpJ:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(r("mvHQ")),i=n(r("Dd8w")),s=n(r("Xxa5")),d=n(r("exGp")),o=n(r("3D1+")),u=n(r("M4fF")),l=r("JaHG"),c=(0,r("NYxO").createNamespacedHelpers)("order"),f=c.mapState,p=c.mapMutations;e.default={name:"Brand",data:function(){return{brandList:{loading:!1,noMore:!1,page:0,list:[]},categoryId:null,orderId:null,filter:"",popularBrand:[]}},created:function(){var t=(0,d.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.categoryId=this.$route.query.category,this.orderId=this.$route.query.orderId,t.next=4,this.getPopularBrandList();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:(0,i.default)({},p(["setBrandValue"]),{executeLoadingProducts:u.default.debounce((0,d.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.brandList.page=1,t.next=3,this.getBrandList();case 3:case"end":return t.stop()}},t,this)})),300),getPopularBrandList:function(){var t=(0,d.default)(s.default.mark(function t(){var e,r=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={orderId:this.orderId,projectId:this.$route.query.projectId,categoryId:this.categoryId},t.next=3,(0,l.loadData)(function(){return o.default.getPopularBrand(e)},function(t){r.popularBrand=t},l.defaultPreHandler);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getBrandList:function(){var t=(0,d.default)(s.default.mark(function t(){var e,r=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={orderId:this.orderId,categoryId:this.categoryId,name:this.filter,page:this.brandList.page},1===this.brandList.page&&(this.brandList.list=[]),t.next=4,(0,l.loadData)(function(){return o.default.getBrands(e)},function(t){r.setIndex(t)},l.defaultPreHandler,!0);case 4:this.brandList.noMore=this.brandList.list.length<50*this.brandList.page;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setIndex:function(t){var e=this;u.default.forEach(t,function(t){var r=t.brandName.substr(0,1).toUpperCase();u.default.find(e.brandList.list,{index:r})||e.brandList.list.push({index:r,list:[]});var n=u.default.findIndex(e.brandList.list,{index:r});e.brandList.list[n].list.push(t)})},selectBrand:function(t){var e={value:t,isJumpingBrand:this.storeOrderFilling.brand.isJumpingBrand};if("hbSelectBrand"===this.$route.name){var r=JSON.parse(window.localStorage.getItem("orderFilling"));r.brand.value=e.value,window.localStorage.setItem("orderFilling",(0,a.default)(r))}else this.setBrandValue(e);this.$router.go(-1)},start:function(){window.event.currentTarget.style.background="#f4f3f3"},end:function(){window.event.currentTarget.style.background="#fff"},loadMore:function(){var t=(0,d.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.brandList.noMore){t.next=2;break}return t.abrupt("return");case 2:return this.brandList.loading=!0,this.brandList.page+=1,t.next=6,this.getBrandList();case 6:this.brandList.loading=!1;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),computed:(0,i.default)({},f({storeOrderFilling:function(t){return t.orderFilling}})),watch:{filter:"executeLoadingProducts"}}},aNWp:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("VRpJ"),a=r.n(n),i={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Brand bg_img_none"},[r("mt-field",{attrs:{placeholder:"输入查询的品牌 如Apple/苹果",disableClear:!0},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[r("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("div",{staticClass:"list"},[t.popularBrand.length>0?r("div",[r("p",{staticClass:"title"},[t._v("热门品牌")]),t._v(" "),r("div",{staticClass:"container"},t._l(t.popularBrand,function(e){return r("div",{staticClass:"hot_brand",on:{click:function(r){t.selectBrand(e)},touchstart:function(e){t.start()},touchend:function(e){t.end()}}},[t._v(t._s(e.brandName)+"\n        ")])}))]):t._e(),t._v(" "),r("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"brandList.loading","infinite-scroll-distance":"300"}},[t._l(t.brandList.list,function(e){return r("div",{key:e.id},[r("p",{staticClass:"title"},[t._v(t._s(e.index))]),t._v(" "),t._l(e.list,function(e){return r("div",{staticClass:"bg_f",on:{touchstart:function(e){t.start()},touchend:function(e){t.end()},click:function(r){t.selectBrand(e)}}},[r("mt-cell",{attrs:{title:e.brandName}})],1)})],2)}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.brandList.noMore&&!t.brandList.loading,expression:"brandList.noMore && !brandList.loading"}],staticClass:"load noMore"},[t._v("已无更多")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.brandList.loading,expression:"brandList.loading"}],staticClass:"load"},[r("mt-spinner",{attrs:{color:"#d4d4d4",type:"fading-circle"}}),t._v("\n        正在加载\n      ")],1)],2)])],1)},staticRenderFns:[]},s=function(t){r("/NU+")},d=r("VU/8")(a.a,i,!1,s,"data-v-23b4df51",null);e.default=d.exports}});
//# sourceMappingURL=2.8e8deaf248c364974c8a.js.map