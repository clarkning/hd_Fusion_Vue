webpackJsonp([5],{"GKh/":function(t,e){},HnZV:function(t,e){},Lzp1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("ovwK"),a=r.n(n),o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"overview"},[t.juniorAch.show?r("div",{on:{click:function(e){t.goToPageJuniorAch()}}},[r("cell",{attrs:{title:"下级业绩",total:t.juniorAch.total,time:t.time}})],1):t._e(),t._v(" "),r("div",{on:{click:function(e){t.goToPageTeam()}}},[r("cell",{attrs:{title:"团队业绩",total:t.teamTotal,time:t.time}})],1),t._v(" "),t.myAch.show?r("div",{on:{click:function(e){t.goToPageMyAch()}}},[r("cell",{attrs:{title:"我的业绩",total:t.myAch.total,time:t.time}})],1):t._e()])},staticRenderFns:[]},i=function(t){r("HnZV")},s=r("VU/8")(a.a,o,!1,i,"data-v-c413664a",null);e.default=s.exports},frJp:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("tVDL"),a=r.n(n),o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"overviewCell"},[r("div",{staticClass:"item_p"},[r("div",{staticClass:"item_title"},[t._v(t._s(t.title))]),t._v(" "),r("div",{staticClass:"item_content"},[r("p",{staticClass:"color3"},[r("span",{staticClass:"total"},[t._v(t._s(t.total))]),t._v("元")]),t._v(" "),r("p",{staticClass:"color8"},[t._v("今日 "+t._s(t.time))])]),t._v(" "),r("div",{staticClass:"item_link"})])])},staticRenderFns:[]},i=function(t){r("GKh/")},s=r("VU/8")(a.a,o,!1,i,"data-v-4c47bfb6",null);e.default=s.exports},ovwK:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(r("Dd8w")),o=n(r("Xxa5")),i=n(r("exGp")),s=n(r("PJh5")),u=n(r("3D1+")),c=r("JaHG"),l=n(r("frJp")),d=n(r("M4fF")),f=r("NYxO");e.default={name:"Overview",components:{cell:l.default},data:function(){return{juniorAch:{show:!1,total:"0"},myAch:{show:!1,total:"0"},query:{startTime:"",endTime:"",partnerId:NaN,projectId:NaN,organizationId:NaN,personId:NaN,organizationScopes:"1,2",dimensions:"1,2,3,4,5",results:"1,2"},teamTotal:"0",time:""}},created:function(){var t=(0,i.default)(o.default.mark(function t(){var e=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrganizationInfo();case 2:return this.getTime(),this.setQuery(),t.next=6,(0,c.loadData)(function(){return e.getData()});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeRouteLeave:function(t,e,r){if("ChooseReportProject"===t.name){var n=this.$store.state.project.filter(function(t){return t.projectList.length>0}),a=n[0].projectList;1===n.length&&1===a.length?(r(!1),this.$router.go(-2)):r()}else r()},methods:(0,a.default)({},(0,f.mapActions)(["getSubOrganizations","getPersonInfo","getProject"]),{getOrganizationInfo:function(){var t=(0,i.default)(o.default.mark(function t(){var e=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.loadData)(function(){return e.getProject()});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getData:function(){var t=(0,i.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTeamData();case 2:return t.next=4,this.getJuniorAchOrMyAch();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getTime:function(){this.time=(0,s.default)().format("A h:mm"),this.time=this.time.replace("AM","上午"),this.time=this.time.replace("PM","下午")},setQuery:function(){this.query.startTime=(0,s.default)().format("YYYY-MM-DD"),this.query.endTime=(0,s.default)().add(1,"days").format("YYYY-MM-DD"),this.query.partnerId=this.$route.query.partnerId,this.query.projectId=this.$route.query.project,this.query.organizationId=Number(this.$route.query.store),this.query.personId=this.$store.state.person.personId},getTeamData:function(){var t=(0,i.default)(o.default.mark(function t(){var e=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.loadData)(function(){return u.default.getReportForm(e.query)},function(t){var r=0;d.default.forEach(t,function(t){r+=t.resultData.salesAmount?Number(t.resultData.salesAmount):0}),e.teamTotal=Math.round(r).toLocaleString("en-US")},c.defaultPreHandler,!0);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getJuniorAchOrMyAch:function(){var t=(0,i.default)(o.default.mark(function t(){var e,r,n,a,i,s=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSubOrganizations(this.query.organizationId);case 2:if(e=d.default.find(this.$store.state.person.orgInfo,{organizationId:this.query.organizationId})){t.next=5;break}return t.abrupt("return");case 5:if(r=e.subOrganizations.length>0,n=0,!r){t.next=14;break}return this.query.organizationScopes="2",this.query.dimensions="4,5",t.next=12,(0,c.loadData)(function(){return u.default.getReportForm(s.query)},function(t){d.default.forEach(t,function(t){n+=t.resultData.salesAmount?Number(t.resultData.salesAmount):0}),s.juniorAch.total=Math.round(n).toLocaleString("en-US"),s.juniorAch.show=!0},c.defaultPreHandler,!0);case 12:t.next=25;break;case 14:return this.query.organizationScopes="1",this.query.dimensions="6,7",a=void 0,t.next=19,(0,c.loadData)(function(){return u.default.getReportForm(s.query)},function(t){a=t},c.defaultPreHandler,!0);case 19:return t.next=21,this.getPersonInfo(this.$store.state.person.personId);case 21:i=d.default.find(a,function(t){return t.resultDimension.personId===Number(s.$store.state.person.personId)}),n=i&&i.resultData.salesAmount?Number(i.resultData.salesAmount):0,this.myAch.total=Math.round(n).toLocaleString("en-US"),this.myAch.show=!0;case 25:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goToPageTeam:function(){this.$router.push({name:"Team",query:{partnerId:this.query.partnerId,projectId:this.query.projectId,organizationId:this.query.organizationId}})},goToPageMyAch:function(){this.$router.push({name:"MyAch",query:{partnerId:this.query.partnerId,projectId:this.query.projectId,organizationId:this.query.organizationId}})},goToPageJuniorAch:function(){this.$router.push({name:"JuniorAch",query:{partnerId:this.query.partnerId,projectId:this.query.projectId,organizationId:this.query.organizationId}})}})}},tVDL:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Overview",props:{title:String,total:String,time:String}}}});
//# sourceMappingURL=5.a8dc872eccb4aa0d9fda.js.map