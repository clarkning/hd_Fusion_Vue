{"version":3,"sources":["webpack:///src/components/public/choose_project.vue","webpack:///./src/components/public/choose_project.vue?91e5","webpack:///./src/components/public/choose_project.vue"],"names":["_vuex","__webpack_require__","_utils","bottomNav","_bottom_nav2","default","sellProgress","_progress2","created","_ref","_asyncToGenerator3","_regenerator2","mark","_callee","setType","getProjectList","setNamePath","redirect","methods","_extends3","mapActions","pushName","_iteratorNormalCompletion","item","_step","value","index","organizationName","_iteratorNormalCompletion2","projectItem","_step2","organizationId","projectId","namePath","projectName","error","project","store","partnerId","query","public_choose_project","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","expression","_v","_e","class","margin","isSell","_l","org","attrs","slot","_s","projectList","length","on","click","$event","goToPage","src","projectLogo","select","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","choose_project_default","a","__webpack_exports__"],"mappings":"6OAkCAA,EAAAC,EAAA,QACAC,EAAAD,EAAA,YACAA,EAAA,aAGAA,EAAA,yBAEA,4BAEAE,UAAAC,EAAAC,QAEAC,aAAAC,EAAAF,wCAGA,aACA,YACA,YACA,mCAIA,aACA,WAEA,KAEAG,QAAA,WApBA,IAAAC,GAAA,EAAAC,EAAAL,SAAAM,EAAAN,QAAAO,KAAA,SAAAC,iGAqBAC,iFAEAC,sBACAC,mBAEAC,2GANA,GAOAC,SAAA,EAAAC,EAAAd,aAAA,EAAAL,EAAAoB,aACA,+CAEA,kDACA,wDACA,sFAEAC,kCAGA,IAAAC,GAAA,8FACA,IAAAC,EAAAC,EAAAC,gCACA,sCACA,sDAEAC,KAEAC,qJAWA,IAAAC,GAAA,sGACA,IAAAC,EAAAC,EAAAL,wBACA,sBACA,4BAEA,mBAGAI,mKAVA,uEAgBA,0BAEA,kIAKAE,0DAGAC,gCAEAC,sCACAC,iDACAD,8CACAC,oCAEAC,oDAIAC,UAEAC,QAEAD,wCAEA,wCAEA,uBACAE,gCAGAjB,SAEAkB,gEAGA,4CACA,4BACAR,qDACAC,iCACAM,6CAIAF,mCAEAf,gBAEAgB,QACAD,oBAGA,wBAVAE,uBAaA,mHCnKAE,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,OAAiBF,EAAA,OAAYG,aAAaC,KAAA,OAAAC,QAAA,SAAA1B,MAAAiB,EAAA,SAAAU,WAAA,eAA0EV,EAAAN,QAAA,SAAAU,EAAA,OAAmCE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,SAAmBN,EAAAW,GAAA,KAAAP,EAAA,KAAAJ,EAAAW,GAAA,cAAAP,EAAA,OAAqDE,YAAA,8BAAwCN,EAAA,OAAAI,EAAA,OAAAA,EAAA,oBAAAJ,EAAAY,KAAAZ,EAAAW,GAAA,KAAAP,EAAA,OAA+ES,OAAOC,OAAAd,EAAAe,SAAoBf,EAAAgB,GAAAhB,EAAAN,QAAA,cAAAuB,GAAyC,OAAAA,EAAA,SAAAb,EAAA,OAAAA,EAAA,OAA0CE,YAAA,UAAoBF,EAAA,WAAAA,EAAA,QAA2Bc,OAAOC,KAAA,SAAeA,KAAA,UAAcnB,EAAAW,GAAAX,EAAAoB,GAAAH,EAAA1B,gBAAA,GAAAS,EAAAW,GAAA,KAAAM,EAAAI,YAAAC,OAAA,EAAAlB,EAAA,OAA0FE,YAAA,gBAA2BN,EAAAgB,GAAAC,EAAA,qBAAApC,GAAyC,OAAAuB,EAAA,OAAiBE,YAAA,MAAAiB,IAAsBC,MAAA,SAAAC,GAAyBzB,EAAA0B,SAAAT,EAAA5B,eAAAR,EAAAS,UAAA2B,EAAArB,eAAkEQ,EAAA,OAAAA,EAAA,OAAsBE,YAAA,MAAAY,OAAyBS,IAAA9C,EAAA+C,iBAAwB5B,EAAAW,GAAA,KAAAP,EAAA,OAAAJ,EAAAW,GAAAX,EAAAoB,GAAAvC,EAAAW,qBAA+DQ,EAAAY,OAAAZ,EAAAY,YAAuBZ,EAAAW,GAAA,KAAAX,EAAA,OAAAI,EAAA,OAAAA,EAAA,aAA0Dc,OAAOW,OAAA7B,EAAAvC,cAAwB,GAAAuC,EAAAY,QAE1qCkB,oBCSjBC,EAXA,SAAAC,GACAzE,EAAA,SAeA0E,EAbA1E,EAAA,OAaA2E,CACAC,EAAAC,EACAtC,GATA,EAWAiC,EAPA,kBAEA,MAUAM,EAAA,QAAAJ,EAAA","file":"static/js/1.8cd249609e162267ed63.js","sourcesContent":["<template>\n  <div class=\"bg\">\n    <div v-show=\"showList\">\n      <div v-if=\"project.listNone\" class=\"null_data\">\n        <div class=\"null\"></div>\n        <p>暂无可选项目</p>\n      </div>\n      <div class=\"ChooseProject bg_img_none\" v-else>\n        <div v-if=\"isSell\">\n          <sellProgress></sellProgress>\n        </div>\n        <div :class=\"{margin: isSell}\">\n          <div v-for=\"org in project.list\" v-if=\"org.namePath\">\n            <div class=\"title\">\n              <mt-cell>\n                <span slot=\"title\">{{ org.namePath }}</span>\n              </mt-cell>\n            </div>\n            <div class=\"choose clear\" v-if=\"org.projectList.length > 0\">\n              <div class=\"pic\" v-for=\"item in org.projectList\" @click=\"goToPage(org.organizationId, item.projectId, org.partnerId)\">\n                <div><img class=\"img\" :src=\"item.projectLogo\"></div>\n                <div>{{ item.projectName }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"isSell\">\n      <bottomNav :select=\"bottomNav\"></bottomNav>\n    </div>\n  </div>\n</template>\n<script>\n  import { mapActions } from 'vuex'\n  import { loadData } from '../../common/utils'\n  import sellProgress from './progress.vue'\n  import bottomNav from './bottom_nav.vue'\n\n  export default {\n    name: 'ChooseProject',\n    components: {\n      bottomNav,\n      sellProgress\n    },\n    data () {\n      return {\n        isSell: false,\n        isRanking: false,\n        isReport: false,\n        bottomNav: 'sales',\n        project: {\n          list: [],\n          listNone: false\n        },\n        showList: false,\n        pushName: ''\n      }\n    },\n    async created () {\n      this.setType()\n      await loadData(() => { return this.getProject() })\n      this.getProjectList()\n      this.setNamePath()\n      this.redirect()\n    },\n    methods: {\n      ...mapActions(['getProject']),\n      setType () {\n        this.isSell = this.$route.name === 'ChooseProject'\n        this.isRanking = this.$route.name === 'ChooseRankingProject'\n        this.isReport = this.$route.name === 'ChooseReportProject'\n        if (this.isSell) {\n          this.pushName = this.$route.meta.pushName\n        }\n      },\n      setNamePath () {\n        for (let item of this.project.list) {\n          if (item.organizationNamePath) {\n            let index = item.organizationNamePath.indexOf('/')\n            if (index !== -1) {\n              item.namePath = item.organizationNamePath.slice(0, index)\n            } else {\n              item.namePath = item.organizationName\n            }\n          }\n        }\n      },\n      getProjectList () {\n        let projectList = []\n        if (!this.isSell) {\n          projectList = this.$store.state.project.filter((item) => {\n            return item.projectList.length > 0\n          })\n        } else {\n          for (let projectItem of this.$store.state.project) {\n            if (projectItem.positionType) {\n              let item = projectItem.positionType.split(',')\n              let find = item.find((i) => {\n                return i === '销售'\n              })\n              if (find) {\n                projectList.push(projectItem)\n              }\n            }\n          }\n        }\n        this.project.list = projectList.filter((item) => {\n          return item.projectList.length > 0\n        })\n        this.project.listNone = this.project.list.length === 0\n      },\n      setGaDimension (organizationId, projectId) {\n        try {\n          let organization = this.project.list.find((item) => {\n            return item.organizationId === organizationId\n          })\n          let project = organization.projectList.find((item) => {\n            return item.projectId === projectId\n          })\n          this.$ga.set('dimension2', organization.namePath)\n          this.$ga.set('dimension1', project.projectName)\n          localStorage.setItem('dimension2', organization.namePath)\n          localStorage.setItem('dimension1', project.projectName)\n        } catch (error) {\n          console.error(error)\n        }\n      },\n      goToPage (store, project, partnerId) {\n        this.setGaDimension(store, project)\n        let query = {\n          store,\n          project\n        }\n        if (this.isRanking) {\n          this.pushName = 'Ranking'\n        } else if (this.isReport) {\n          this.pushName = 'Overview'\n          query.partnerId = partnerId\n        }\n        this.$router.push({\n          name: this.pushName,\n          query\n        })\n      },\n      redirect () {\n        let len = (this.project.list.length === 1 && this.project.list[0].projectList.length === 1)\n        if (len) {\n          let store = this.project.list[0].organizationId\n          let project = this.project.list[0].projectList[0].projectId\n          let partnerId = this.project.list[0].partnerId\n          if (!this.isSell) {\n            this.goToPage(store, project, partnerId)\n          } else {\n            this.setGaDimension(store, project)\n            this.$router.replace({\n              name: this.pushName,\n              query: {\n                store,\n                project,\n                redirect: true\n              }\n            })\n          }\n        } else {\n          this.showList = true\n        }\n      }\n    }\n  }\n</script>\n<style scoped>\n  .bg {\n    background: #ffffff;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  .margin {\n    margin-top: 40px;\n    margin-bottom: 60px;\n  }\n\n  .title {\n    position: relative;\n    z-index: 0;\n  }\n\n  .title:before {\n    content: \" \";\n    position: absolute;\n    top: 40px;\n    right: 0;\n    height: 1px;\n    border-top: 1px solid #e5e5e5;\n    color: #e5e5e5;\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n    left: 15px;\n  }\n\n  .title span {\n    font-size: 14px;\n    color: #888;\n  }\n\n  .choose {\n    padding-left: 15px;\n  }\n\n  .choose:not(:last-child) {\n    padding-bottom: 15px;\n  }\n\n  .pic {\n    box-sizing: border-box;\n    width: calc((100% - 45px) / 3);\n    float: left;\n    margin-right: 15px;\n    height: 110px;\n    padding: 20px 15px 0;\n    margin-bottom: 10px;\n    background: #fff;\n  }\n\n  .img {\n    width: 50px;\n    height: 50px;\n    margin-bottom: 10px;\n  }\n\n  .pic div {\n    text-align: center;\n    font-size: 12px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/public/choose_project.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showList),expression:\"showList\"}]},[(_vm.project.listNone)?_c('div',{staticClass:\"null_data\"},[_c('div',{staticClass:\"null\"}),_vm._v(\" \"),_c('p',[_vm._v(\"暂无可选项目\")])]):_c('div',{staticClass:\"ChooseProject bg_img_none\"},[(_vm.isSell)?_c('div',[_c('sellProgress')],1):_vm._e(),_vm._v(\" \"),_c('div',{class:{margin: _vm.isSell}},_vm._l((_vm.project.list),function(org){return (org.namePath)?_c('div',[_c('div',{staticClass:\"title\"},[_c('mt-cell',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(org.namePath))])])],1),_vm._v(\" \"),(org.projectList.length > 0)?_c('div',{staticClass:\"choose clear\"},_vm._l((org.projectList),function(item){return _c('div',{staticClass:\"pic\",on:{\"click\":function($event){_vm.goToPage(org.organizationId, item.projectId, org.partnerId)}}},[_c('div',[_c('img',{staticClass:\"img\",attrs:{\"src\":item.projectLogo}})]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(item.projectName))])])})):_vm._e()]):_vm._e()}))])]),_vm._v(\" \"),(_vm.isSell)?_c('div',[_c('bottomNav',{attrs:{\"select\":_vm.bottomNav}})],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1143d2fe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/public/choose_project.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1143d2fe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./choose_project.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./choose_project.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1143d2fe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./choose_project.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1143d2fe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/public/choose_project.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}