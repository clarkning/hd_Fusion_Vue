{"version":3,"sources":["webpack:///./src/components/report/overview.vue?bc31","webpack:///./src/components/report/overview.vue","webpack:///./src/components/report/overview_cell.vue?2206","webpack:///./src/components/report/overview_cell.vue","webpack:///src/components/report/overview.vue","webpack:///src/components/report/overview_cell.vue"],"names":["report_overview","render","_vm","this","_h","$createElement","_c","_self","staticClass","juniorAch","on","click","$event","goToPageJuniorAch","attrs","title","total","time","_e","_v","goToPageTeam","teamTotal","myAch","goToPageMyAch","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","overview_default","a","__webpack_exports__","report_overview_cell","_s","overview_cell_default","_utils","_vuex","cell","_overview_cell2","default","NaN","created","_ref","_asyncToGenerator3","_regenerator2","mark","_callee","getOrganizationInfo","getTime","setQuery","project","filter","item","projectList","next","methods","_extends3","mapActions","getData","getTeamData","getJuniorAchOrMyAch","partnerId","store","personId","query","organizationId","x","data","res","_find","resultData","salesAmount","Number","projectId","String"],"mappings":"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","file":"static/js/5.a8dc872eccb4aa0d9fda.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overview\"},[(_vm.juniorAch.show)?_c('div',{on:{\"click\":function($event){_vm.goToPageJuniorAch()}}},[_c('cell',{attrs:{\"title\":\"下级业绩\",\"total\":_vm.juniorAch.total,\"time\":_vm.time}})],1):_vm._e(),_vm._v(\" \"),_c('div',{on:{\"click\":function($event){_vm.goToPageTeam()}}},[_c('cell',{attrs:{\"title\":\"团队业绩\",\"total\":_vm.teamTotal,\"time\":_vm.time}})],1),_vm._v(\" \"),(_vm.myAch.show)?_c('div',{on:{\"click\":function($event){_vm.goToPageMyAch()}}},[_c('cell',{attrs:{\"title\":\"我的业绩\",\"total\":_vm.myAch.total,\"time\":_vm.time}})],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c413664a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/report/overview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c413664a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./overview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./overview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c413664a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./overview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c413664a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/report/overview.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overviewCell\"},[_c('div',{staticClass:\"item_p\"},[_c('div',{staticClass:\"item_title\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('div',{staticClass:\"item_content\"},[_c('p',{staticClass:\"color3\"},[_c('span',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.total))]),_vm._v(\"元\")]),_vm._v(\" \"),_c('p',{staticClass:\"color8\"},[_vm._v(\"今日 \"+_vm._s(_vm.time))])]),_vm._v(\" \"),_c('div',{staticClass:\"item_link\"})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c47bfb6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/report/overview_cell.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c47bfb6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./overview_cell.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./overview_cell.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c47bfb6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./overview_cell.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4c47bfb6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/report/overview_cell.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"overview\">\n    <div v-if=\"juniorAch.show\" @click=\"goToPageJuniorAch()\">\n      <cell title=\"下级业绩\" :total=\"juniorAch.total\" :time=\"time\"></cell>\n    </div>\n    <div @click=\"goToPageTeam()\">\n      <cell title=\"团队业绩\" :total=\"teamTotal\" :time=\"time\"></cell>\n    </div>\n    <div v-if=\"myAch.show\" @click=\"goToPageMyAch()\">\n      <cell title=\"我的业绩\" :total=\"myAch.total\" :time=\"time\"></cell>\n    </div>\n  </div>\n</template>\n\n<script>\n  import moment from 'moment'\n  import api from '../../api/index2'\n  import { loadData, defaultPreHandler } from '../../common/utils'\n  import cell from './overview_cell'\n  import _ from 'lodash'\n  import { mapActions } from 'vuex'\n\n  export default {\n    name: 'Overview',\n    components: {\n      cell\n    },\n    data () {\n      return {\n        juniorAch: {\n          show: false,\n          total: '0'\n        },\n        myAch: {\n          show: false,\n          total: '0'\n        },\n        query: {\n          startTime: '',\n          endTime: '',\n          partnerId: NaN,\n          projectId: NaN,\n          organizationId: NaN,\n          personId: NaN,\n          organizationScopes: '1,2',\n          dimensions: '1,2,3,4,5',\n          results: '1,2'\n        },\n        teamTotal: '0',\n        time: ''\n      }\n    },\n    async created () {\n      await this.getOrganizationInfo()\n      this.getTime()\n      this.setQuery()\n      await loadData(() => { return this.getData() })\n    },\n    beforeRouteLeave (to, from, next) {\n      if (to.name === 'ChooseReportProject') {\n        let projectList = this.$store.state.project\n          .filter((item) => {\n            return item.projectList.length > 0\n          })\n        let projectInfo = projectList[0].projectList\n        if (projectList.length === 1 && projectInfo.length === 1) {\n          next(false)\n          this.$router.go(-2)\n        } else {\n          next()\n        }\n      } else {\n        next()\n      }\n    },\n    methods: {\n      ...mapActions(['getSubOrganizations', 'getPersonInfo', 'getProject']),\n      async getOrganizationInfo () {\n        await loadData(() => { return this.getProject() })\n      },\n      async getData () {\n        await this.getTeamData()\n        await this.getJuniorAchOrMyAch()\n      },\n      getTime () {\n        this.time = moment().format('A h:mm')\n        this.time = this.time.replace('AM', '上午')\n        this.time = this.time.replace('PM', '下午')\n      },\n      setQuery () {\n        this.query.startTime = moment().format('YYYY-MM-DD')\n        this.query.endTime = moment().add(1, 'days').format('YYYY-MM-DD')\n        this.query.partnerId = this.$route.query.partnerId\n        this.query.projectId = this.$route.query.project\n        this.query.organizationId = Number(this.$route.query.store)\n        this.query.personId = this.$store.state.person.personId\n      },\n      async getTeamData () {\n        await loadData(() => {\n          return api.getReportForm(this.query)\n        }, data => {\n          let teamTotal = 0\n          _.forEach(data, item => {\n            teamTotal += item.resultData.salesAmount ? Number(item.resultData.salesAmount) : 0\n          })\n          this.teamTotal = (Math.round(teamTotal)).toLocaleString('en-US')\n        }, defaultPreHandler, true)\n      },\n      async getJuniorAchOrMyAch () {\n        await this.getSubOrganizations(this.query.organizationId)\n        let find = _.find(this.$store.state.person.orgInfo, {organizationId: this.query.organizationId})\n        if (!find) return\n        let x = find.subOrganizations.length > 0\n        let total = 0\n        if (x) {\n          this.query.organizationScopes = '2'\n          this.query.dimensions = '4,5'\n          await loadData(() => {\n            return api.getReportForm(this.query)\n          }, data => {\n            _.forEach(data, item => {\n              total += item.resultData.salesAmount ? Number(item.resultData.salesAmount) : 0\n            })\n            this.juniorAch.total = (Math.round(total)).toLocaleString('en-US')\n            this.juniorAch.show = true\n          }, defaultPreHandler, true)\n        } else {\n          this.query.organizationScopes = '1'\n          this.query.dimensions = '6,7'\n          let data\n          await loadData(() => {\n            return api.getReportForm(this.query)\n          }, res => {\n            data = res\n          }, defaultPreHandler, true)\n          await this.getPersonInfo(this.$store.state.person.personId)\n          let find = _.find(data, (item) => {\n            return item.resultDimension.personId === Number(this.$store.state.person.personId)\n          })\n          total = find\n            ? find.resultData.salesAmount\n              ? Number(find.resultData.salesAmount)\n              : 0\n            : 0\n          this.myAch.total = (Math.round(total)).toLocaleString('en-US')\n          this.myAch.show = true\n        }\n      },\n      goToPageTeam () {\n        this.$router.push({\n          name: 'Team',\n          query: {\n            partnerId: this.query.partnerId,\n            projectId: this.query.projectId,\n            organizationId: this.query.organizationId\n          }\n        })\n      },\n      goToPageMyAch () {\n        this.$router.push({\n          name: 'MyAch',\n          query: {\n            partnerId: this.query.partnerId,\n            projectId: this.query.projectId,\n            organizationId: this.query.organizationId\n          }\n        })\n      },\n      goToPageJuniorAch () {\n        this.$router.push({\n          name: 'JuniorAch',\n          query: {\n            partnerId: this.query.partnerId,\n            projectId: this.query.projectId,\n            organizationId: this.query.organizationId\n          }\n        })\n      }\n    }\n  }\n</script>\n<style scoped>\n  .m_b {\n    margin-bottom: 15px;\n  }\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/report/overview.vue","<template>\n  <div class=\"overviewCell\">\n    <div class=\"item_p\">\n      <div class=\"item_title\">{{ title }}</div>\n      <div class=\"item_content\">\n        <p class=\"color3\"><span class=\"total\">{{ total }}</span>元</p>\n        <p class=\"color8\">今日 {{ time }}</p>\n      </div>\n      <div class=\"item_link\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'Overview',\n    props: {\n      title: String,\n      total: String,\n      time: String\n    }\n  }\n</script>\n<style scoped>\n  .overviewCell {\n    background: #fff;\n    width: 95%;\n    margin: 10px auto 0;\n    border: 1px solid #e5e5e5;\n    border-radius: 5px;\n  }\n\n  .overviewCell:not(:last-child)::after {\n    content: \" \";\n    display: block;\n    width: calc(100% - 15px);\n    margin-left: 15px;\n    height: 1px;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n    background: #e5e5e5;\n  }\n\n  .item_p {\n    padding: 10px 0 10px 15px;\n    display: table;\n    width: 100%;\n    box-sizing: border-box;\n    table-layout: fixed;\n  }\n\n  .item_title {\n    display: table-cell;\n    vertical-align: middle;\n    font-size: 14px;\n    width: 5rem;\n  }\n\n  .item_content {\n    line-height: 2;\n    display: table-cell;\n    vertical-align: middle;\n    padding-right: 15px;\n    text-align: right;\n  }\n\n  .color3 {\n    color: #333;\n    font-size: 12px;\n  }\n\n  .color8 {\n    color: #888;\n    font-size: 12px;\n  }\n\n  .item_link {\n    display: table-cell;\n    position: relative;\n    width: 25px;\n  }\n\n  .item_link::after {\n    border: solid 2px #c8c8cd;\n    border-bottom-width: 0;\n    border-left-width: 0;\n    content: \" \";\n    top: 50%;\n    right: 50%;\n    position: absolute;\n    width: 5px;\n    height: 5px;\n    transform: translateY(-50%) rotate(45deg);\n  }\n\n  .total {\n    font-size: 16px;\n    font-weight: bolder;\n    margin-right: 5px;\n  }\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/report/overview_cell.vue"],"sourceRoot":""}